<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>API/index.js - Documentation</title>
    
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <script src="scripts/nav.js" defer></script>
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav >
    
    <input type="text" id="nav-search" placeholder="Search" />
    
    
    <h2><a href="index.html">Home</a></h2><h2><a href="https://github.com/Greenman-Pedersen-Inc/voyager.webpack.vehicle" target="_blank" class="menu-item" id="repo_link" >Github Repository</a></h2><h3>Modules</h3><ul><li><a href="module-API.html">API</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-API.html#.getCrashSegmentsHeatmapQuery">getCrashSegmentsHeatmapQuery</a></li><li data-type='method' style='display: none;'><a href="module-API.html#.getNetworkSegmentData">getNetworkSegmentData</a></li><li data-type='method' style='display: none;'><a href="module-API.html#.getStateBreakdown">getStateBreakdown</a></li><li data-type='method' style='display: none;'><a href="module-API.html#~CreateDetailWhereClause">CreateDetailWhereClause</a></li><li data-type='method' style='display: none;'><a href="module-API.html#~CreateSearchParameters">CreateSearchParameters</a></li><li data-type='method' style='display: none;'><a href="module-API.html#~CreateWhereClause">CreateWhereClause</a></li><li data-type='method' style='display: none;'><a href="module-API.html#~GetAccidentsBySriQuery">GetAccidentsBySriQuery</a></li><li data-type='method' style='display: none;'><a href="module-API.html#~GetClusterHeatmapQuery">GetClusterHeatmapQuery</a></li><li data-type='method' style='display: none;'><a href="module-API.html#~GetCountyHeatmapQuery">GetCountyHeatmapQuery</a></li><li data-type='method' style='display: none;'><a href="module-API.html#~GetCrashDetailsQuery">GetCrashDetailsQuery</a></li><li data-type='method' style='display: none;'><a href="module-API.html#~GetCrashesQuery">GetCrashesQuery</a></li><li data-type='method' style='display: none;'><a href="module-API.html#~GetMuniHeatmapQuery">GetMuniHeatmapQuery</a></li><li data-type='method' style='display: none;'><a href="module-API.html#~GetPersonsQuery">GetPersonsQuery</a></li><li data-type='method' style='display: none;'><a href="module-API.html#~GetSriQuery">GetSriQuery</a></li><li data-type='method' style='display: none;'><a href="module-API.html#~addUserQueries">addUserQueries</a></li><li data-type='method' style='display: none;'><a href="module-API.html#~deleteUserQueries">deleteUserQueries</a></li><li data-type='method' style='display: none;'><a href="module-API.html#~errorHandler">errorHandler</a></li><li data-type='method' style='display: none;'><a href="module-API.html#~getCountyBoundaries">getCountyBoundaries</a></li><li data-type='method' style='display: none;'><a href="module-API.html#~getCountyBoundingBoxQuery">getCountyBoundingBoxQuery</a></li><li data-type='method' style='display: none;'><a href="module-API.html#~getCrash">getCrash</a></li><li data-type='method' style='display: none;'><a href="module-API.html#~getCrashDetailQuery">getCrashDetailQuery</a></li><li data-type='method' style='display: none;'><a href="module-API.html#~getCrashList">getCrashList</a></li><li data-type='method' style='display: none;'><a href="module-API.html#~getData">getData</a></li><li data-type='method' style='display: none;'><a href="module-API.html#~getExportRecords">getExportRecords</a></li><li data-type='method' style='display: none;'><a href="module-API.html#~getExportRecordsByID">getExportRecordsByID</a></li><li data-type='method' style='display: none;'><a href="module-API.html#~getFeedbackFormQuery">getFeedbackFormQuery</a></li><li data-type='method' style='display: none;'><a href="module-API.html#~getFullName">getFullName</a></li><li data-type='method' style='display: none;'><a href="module-API.html#~getGraphDataQuery">getGraphDataQuery</a></li><li data-type='method' style='display: none;'><a href="module-API.html#~getLayerAttributes">getLayerAttributes</a></li><li data-type='method' style='display: none;'><a href="module-API.html#~getMPO">getMPO</a></li><li data-type='method' style='display: none;'><a href="module-API.html#~getModules">getModules</a></li><li data-type='method' style='display: none;'><a href="module-API.html#~getMunicipalBoundingBoxQuery">getMunicipalBoundingBoxQuery</a></li><li data-type='method' style='display: none;'><a href="module-API.html#~getMunicipalityBoundaries">getMunicipalityBoundaries</a></li><li data-type='method' style='display: none;'><a href="module-API.html#~getNotifications">getNotifications</a></li><li data-type='method' style='display: none;'><a href="module-API.html#~getRouteCrashData">getRouteCrashData</a></li><li data-type='method' style='display: none;'><a href="module-API.html#~getSRIBreakdown">getSRIBreakdown</a></li><li data-type='method' style='display: none;'><a href="module-API.html#~getSRIHistogramQuery">getSRIHistogramQuery</a></li><li data-type='method' style='display: none;'><a href="module-API.html#~getSRIUnderlayQuery">getSRIUnderlayQuery</a></li><li data-type='method' style='display: none;'><a href="module-API.html#~getSessionInfo">getSessionInfo</a></li><li data-type='method' style='display: none;'><a href="module-API.html#~getTable">getTable</a></li><li data-type='method' style='display: none;'><a href="module-API.html#~getTopLocations">getTopLocations</a></li><li data-type='method' style='display: none;'><a href="module-API.html#~getUserQueries">getUserQueries</a></li><li data-type='method' style='display: none;'><a href="module-API.html#~postData">postData</a></li></ul></li><li><a href="module-AlertBox.html">AlertBox</a></li><li><a href="module-CodeTranslator.html">CodeTranslator</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-CodeTranslator.html#~convertCodeDescription">convertCodeDescription</a></li><li data-type='method' style='display: none;'><a href="module-CodeTranslator.html#~convertFeature">convertFeature</a></li><li data-type='method' style='display: none;'><a href="module-CodeTranslator.html#~convertFeatureObjectValues">convertFeatureObjectValues</a></li><li data-type='method' style='display: none;'><a href="module-CodeTranslator.html#~convertTableCodes">convertTableCodes</a></li><li data-type='method' style='display: none;'><a href="module-CodeTranslator.html#~resolveFieldAlias">resolveFieldAlias</a></li></ul></li><li><a href="module-CrashFilter.html">CrashFilter</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-CrashFilter.html#~clearSearchHighlights">clearSearchHighlights</a></li><li data-type='method' style='display: none;'><a href="module-CrashFilter.html#~getSelectedFilters">getSelectedFilters</a></li><li data-type='method' style='display: none;'><a href="module-CrashFilter.html#~getSelectedJurisdictions">getSelectedJurisdictions</a></li><li data-type='method' style='display: none;'><a href="module-CrashFilter.html#~getSignalsSelectedFilters">getSignalsSelectedFilters</a></li><li data-type='method' style='display: none;'><a href="module-CrashFilter.html#~reset">reset</a></li><li data-type='method' style='display: none;'><a href="module-CrashFilter.html#~searchFilters">searchFilters</a></li><li data-type='method' style='display: none;'><a href="module-CrashFilter.html#~setFilters">setFilters</a></li></ul></li><li><a href="module-CrashMap_widgets_CrashClusters.html">CrashMap/widgets/CrashClusters</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-CrashMap_widgets_CrashClusters.html#~addToMap">addToMap</a></li><li data-type='method' style='display: none;'><a href="module-CrashMap_widgets_CrashClusters.html#~setMinZoom">setMinZoom</a></li><li data-type='method' style='display: none;'><a href="module-CrashMap_widgets_CrashClusters.html#~update">update</a></li><li data-type='method' style='display: none;'><a href="module-CrashMap_widgets_CrashClusters.html#~updateSourceData">updateSourceData</a></li></ul></li><li><a href="module-CrashMap_widgets_CrashGrouping.html">CrashMap/widgets/CrashGrouping</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-CrashMap_widgets_CrashGrouping.html#~CrashGrouping">CrashGrouping</a></li><li data-type='method' style='display: none;'><a href="module-CrashMap_widgets_CrashGrouping.html#~addSelectValues">addSelectValues</a></li><li data-type='method' style='display: none;'><a href="module-CrashMap_widgets_CrashGrouping.html#~removePriorWindows">removePriorWindows</a></li></ul></li><li><a href="module-CrashMap_widgets_CrashGrouping_widgets_BreakdownComparator.html">CrashMap/widgets/CrashGrouping/widgets/BreakdownComparator</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-CrashMap_widgets_CrashGrouping_widgets_BreakdownComparator.html#~update">update</a></li></ul></li><li><a href="module-CrashMap_widgets_CrashGrouping_widgets_BreakdownComparator_widgets_BreakdownChart.html">CrashMap/widgets/CrashGrouping/widgets/BreakdownComparator/widgets/BreakdownChart</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-CrashMap_widgets_CrashGrouping_widgets_BreakdownComparator_widgets_BreakdownChart.html#~update">update</a></li></ul></li><li><a href="module-CrashMap_widgets_CrashRecordDialog.html">CrashMap/widgets/CrashRecordDialog</a></li><li><a href="module-CrashMap_widgets_CrashSegmentsHeatmap.html">CrashMap/widgets/CrashSegmentsHeatmap</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-CrashMap_widgets_CrashSegmentsHeatmap.html#~addToMap">addToMap</a></li><li data-type='method' style='display: none;'><a href="module-CrashMap_widgets_CrashSegmentsHeatmap.html#~clearVisuals">clearVisuals</a></li><li data-type='method' style='display: none;'><a href="module-CrashMap_widgets_CrashSegmentsHeatmap.html#~highlightFeature">highlightFeature</a></li><li data-type='method' style='display: none;'><a href="module-CrashMap_widgets_CrashSegmentsHeatmap.html#~update">update</a></li><li data-type='method' style='display: none;'><a href="module-CrashMap_widgets_CrashSegmentsHeatmap.html#~updateSourceData">updateSourceData</a></li></ul></li><li><a href="module-CrashMap_widgets_HighlightFeature.html">CrashMap/widgets/HighlightFeature</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-CrashMap_widgets_HighlightFeature.html#~clearHighlight">clearHighlight</a></li><li data-type='method' style='display: none;'><a href="module-CrashMap_widgets_HighlightFeature.html#~makePointData">makePointData</a></li></ul></li><li><a href="module-CrashMap_widgets_JursidictionBoundaries.html">CrashMap/widgets/JursidictionBoundaries</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-CrashMap_widgets_JursidictionBoundaries.html#~addToMap">addToMap</a></li><li data-type='method' style='display: none;'><a href="module-CrashMap_widgets_JursidictionBoundaries.html#~update">update</a></li></ul></li><li><a href="module-CrashMap_widgets_Legend.html">CrashMap/widgets/Legend</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-CrashMap_widgets_Legend.html#~addLayerGroup">addLayerGroup</a></li><li data-type='method' style='display: none;'><a href="module-CrashMap_widgets_Legend.html#~checkXPosition">checkXPosition</a></li><li data-type='method' style='display: none;'><a href="module-CrashMap_widgets_Legend.html#~checkYPosition">checkYPosition</a></li><li data-type='method' style='display: none;'><a href="module-CrashMap_widgets_Legend.html#~clear">clear</a></li><li data-type='method' style='display: none;'><a href="module-CrashMap_widgets_Legend.html#~getPosition">getPosition</a></li><li data-type='method' style='display: none;'><a href="module-CrashMap_widgets_Legend.html#~hide">hide</a></li><li data-type='method' style='display: none;'><a href="module-CrashMap_widgets_Legend.html#~resetYPosition">resetYPosition</a></li><li data-type='method' style='display: none;'><a href="module-CrashMap_widgets_Legend.html#~show">show</a></li><li data-type='method' style='display: none;'><a href="module-CrashMap_widgets_Legend.html#~update">update</a></li></ul></li><li><a href="module-CrashMap_widgets_LegendCard.html">CrashMap/widgets/LegendCard</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-CrashMap_widgets_LegendCard.html#~populateCardEntries">populateCardEntries</a></li><li data-type='method' style='display: none;'><a href="module-CrashMap_widgets_LegendCard.html#~update">update</a></li><li data-type='method' style='display: none;'><a href="module-CrashMap_widgets_LegendCard.html#~updateVisibility">updateVisibility</a></li></ul></li><li><a href="module-CrashMap_widgets_LegendCardGroup.html">CrashMap/widgets/LegendCardGroup</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-CrashMap_widgets_LegendCardGroup.html#~createLegendScheme">createLegendScheme</a></li><li data-type='method' style='display: none;'><a href="module-CrashMap_widgets_LegendCardGroup.html#~updateVisibility">updateVisibility</a></li></ul></li><li><a href="module-CrashMap_widgets_MapSources.html">CrashMap/widgets/MapSources</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-CrashMap_widgets_MapSources.html#~getHighlightLayerSource">getHighlightLayerSource</a></li><li data-type='method' style='display: none;'><a href="module-CrashMap_widgets_MapSources.html#~getHighlightLayerSource">getHighlightLayerSource</a></li><li data-type='method' style='display: none;'><a href="module-CrashMap_widgets_MapSources.html#~getLayerGroupData">getLayerGroupData</a></li><li data-type='method' style='display: none;'><a href="module-CrashMap_widgets_MapSources.html#~getMapLayerData">getMapLayerData</a></li><li data-type='method' style='display: none;'><a href="module-CrashMap_widgets_MapSources.html#~getOverlayLayerDefinitions">getOverlayLayerDefinitions</a></li></ul></li><li><a href="module-CrashMap_widgets_Screenshot.html">CrashMap/widgets/Screenshot</a></li><li><a href="module-FeedbackForm.html">FeedbackForm</a></li><li><a href="module-FilterMenu.html">FilterMenu</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-FilterMenu.html#~clearCheckBoxSpinners">clearCheckBoxSpinners</a></li><li data-type='method' style='display: none;'><a href="module-FilterMenu.html#~hide">hide</a></li><li data-type='method' style='display: none;'><a href="module-FilterMenu.html#~isLoading">isLoading</a></li><li data-type='method' style='display: none;'><a href="module-FilterMenu.html#~show">show</a></li></ul></li><li><a href="module-FilterMenu_widgets_CheckboxFilter.html">FilterMenu/widgets/CheckboxFilter</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-FilterMenu_widgets_CheckboxFilter.html#~checkFilterField">checkFilterField</a></li><li data-type='method' style='display: none;'><a href="module-FilterMenu_widgets_CheckboxFilter.html#~clearTable">clearTable</a></li><li data-type='method' style='display: none;'><a href="module-FilterMenu_widgets_CheckboxFilter.html#~getDescriptionSelections">getDescriptionSelections</a></li><li data-type='method' style='display: none;'><a href="module-FilterMenu_widgets_CheckboxFilter.html#~getSelections">getSelections</a></li><li data-type='method' style='display: none;'><a href="module-FilterMenu_widgets_CheckboxFilter.html#~reset">reset</a></li><li data-type='method' style='display: none;'><a href="module-FilterMenu_widgets_CheckboxFilter.html#~selectEntireTable">selectEntireTable</a></li></ul></li><li><a href="module-FilterMenu_widgets_CheckboxFilter_widgets_CheckBoxRow.html">FilterMenu/widgets/CheckboxFilter/widgets/CheckBoxRow</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-FilterMenu_widgets_CheckboxFilter_widgets_CheckBoxRow.html#~check">check</a></li><li data-type='method' style='display: none;'><a href="module-FilterMenu_widgets_CheckboxFilter_widgets_CheckBoxRow.html#~disable">disable</a></li><li data-type='method' style='display: none;'><a href="module-FilterMenu_widgets_CheckboxFilter_widgets_CheckBoxRow.html#~uncheck">uncheck</a></li></ul></li><li><a href="module-FilterMenu_widgets_DateSelector.html">FilterMenu/widgets/DateSelector</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-FilterMenu_widgets_DateSelector.html#~checkFilterField">checkFilterField</a></li><li data-type='method' style='display: none;'><a href="module-FilterMenu_widgets_DateSelector.html#~getDescriptionSelections">getDescriptionSelections</a></li><li data-type='method' style='display: none;'><a href="module-FilterMenu_widgets_DateSelector.html#~getSelections">getSelections</a></li><li data-type='method' style='display: none;'><a href="module-FilterMenu_widgets_DateSelector.html#~hide">hide</a></li><li data-type='method' style='display: none;'><a href="module-FilterMenu_widgets_DateSelector.html#~reset">reset</a></li><li data-type='method' style='display: none;'><a href="module-FilterMenu_widgets_DateSelector.html#~show">show</a></li></ul></li><li><a href="module-FilterMenu_widgets_DateSelector_widgets_ApplyChangesSelector.html">FilterMenu/widgets/DateSelector/widgets/ApplyChangesSelector</a></li><li><a href="module-FilterMenu_widgets_DateSelector_widgets_DateRangeSelector.html">FilterMenu/widgets/DateSelector/widgets/DateRangeSelector</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-FilterMenu_widgets_DateSelector_widgets_DateRangeSelector.html#~checkFilterField">checkFilterField</a></li><li data-type='method' style='display: none;'><a href="module-FilterMenu_widgets_DateSelector_widgets_DateRangeSelector.html#~clearDateRangeSelection">clearDateRangeSelection</a></li><li data-type='method' style='display: none;'><a href="module-FilterMenu_widgets_DateSelector_widgets_DateRangeSelector.html#~getSelections">getSelections</a></li><li data-type='method' style='display: none;'><a href="module-FilterMenu_widgets_DateSelector_widgets_DateRangeSelector.html#~returnRange">returnRange</a></li></ul></li><li><a href="module-FilterMenu_widgets_DateSelector_widgets_MonthSelector.html">FilterMenu/widgets/DateSelector/widgets/MonthSelector</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-FilterMenu_widgets_DateSelector_widgets_MonthSelector.html#~checkFilterField">checkFilterField</a></li><li data-type='method' style='display: none;'><a href="module-FilterMenu_widgets_DateSelector_widgets_MonthSelector.html#~clearMonthSelection">clearMonthSelection</a></li><li data-type='method' style='display: none;'><a href="module-FilterMenu_widgets_DateSelector_widgets_MonthSelector.html#~getDescriptionSelections">getDescriptionSelections</a></li><li data-type='method' style='display: none;'><a href="module-FilterMenu_widgets_DateSelector_widgets_MonthSelector.html#~getSelections">getSelections</a></li><li data-type='method' style='display: none;'><a href="module-FilterMenu_widgets_DateSelector_widgets_MonthSelector.html#~highlightMonthsByValues">highlightMonthsByValues</a></li><li data-type='method' style='display: none;'><a href="module-FilterMenu_widgets_DateSelector_widgets_MonthSelector.html#~setFilter">setFilter</a></li></ul></li><li><a href="module-FilterMenu_widgets_DateSelector_widgets_YearSelector.html">FilterMenu/widgets/DateSelector/widgets/YearSelector</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-FilterMenu_widgets_DateSelector_widgets_YearSelector.html#~checkFilterField">checkFilterField</a></li><li data-type='method' style='display: none;'><a href="module-FilterMenu_widgets_DateSelector_widgets_YearSelector.html#~clearYearSelection">clearYearSelection</a></li><li data-type='method' style='display: none;'><a href="module-FilterMenu_widgets_DateSelector_widgets_YearSelector.html#~getDescriptionSelections">getDescriptionSelections</a></li><li data-type='method' style='display: none;'><a href="module-FilterMenu_widgets_DateSelector_widgets_YearSelector.html#~getSelections">getSelections</a></li><li data-type='method' style='display: none;'><a href="module-FilterMenu_widgets_DateSelector_widgets_YearSelector.html#~highlightYearsByValues">highlightYearsByValues</a></li><li data-type='method' style='display: none;'><a href="module-FilterMenu_widgets_DateSelector_widgets_YearSelector.html#~setFilter">setFilter</a></li></ul></li><li><a href="module-FilterMenu_widgets_LocationFilter_widgets_ApplyChangesSelector.html">FilterMenu/widgets/LocationFilter/widgets/ApplyChangesSelector</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-FilterMenu_widgets_LocationFilter_widgets_ApplyChangesSelector.html#~error">error</a></li></ul></li><li><a href="module-FilterMenu_widgets_LocationFilter_widgets_RadioBoxRow.html">FilterMenu/widgets/LocationFilter/widgets/RadioBoxRow</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-FilterMenu_widgets_LocationFilter_widgets_RadioBoxRow.html#~reset">reset</a></li></ul></li><li><a href="module-FilterMenu_widgets_MultivehicleFilter.html">FilterMenu/widgets/MultivehicleFilter</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-FilterMenu_widgets_MultivehicleFilter.html#~checkFilterField">checkFilterField</a></li><li data-type='method' style='display: none;'><a href="module-FilterMenu_widgets_MultivehicleFilter.html#~getDescriptionSelections">getDescriptionSelections</a></li><li data-type='method' style='display: none;'><a href="module-FilterMenu_widgets_MultivehicleFilter.html#~getSelections">getSelections</a></li><li data-type='method' style='display: none;'><a href="module-FilterMenu_widgets_MultivehicleFilter.html#~hide">hide</a></li><li data-type='method' style='display: none;'><a href="module-FilterMenu_widgets_MultivehicleFilter.html#~reset">reset</a></li><li data-type='method' style='display: none;'><a href="module-FilterMenu_widgets_MultivehicleFilter.html#~show">show</a></li></ul></li><li><a href="module-FilterMenu_widgets_MultivehicleFilter_widgets_ApplyChangesSelector.html">FilterMenu/widgets/MultivehicleFilter/widgets/ApplyChangesSelector</a></li><li><a href="module-FilterMenu_widgets_MultivehicleFilter_widgets_SelectDropDown.html">FilterMenu/widgets/MultivehicleFilter/widgets/SelectDropDown</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-FilterMenu_widgets_MultivehicleFilter_widgets_SelectDropDown.html#~disable">disable</a></li><li data-type='method' style='display: none;'><a href="module-FilterMenu_widgets_MultivehicleFilter_widgets_SelectDropDown.html#~enable">enable</a></li><li data-type='method' style='display: none;'><a href="module-FilterMenu_widgets_MultivehicleFilter_widgets_SelectDropDown.html#~reset">reset</a></li><li data-type='method' style='display: none;'><a href="module-FilterMenu_widgets_MultivehicleFilter_widgets_SelectDropDown.html#~update">update</a></li></ul></li><li><a href="module-FilterSearch.html">FilterSearch</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-FilterSearch.html#~clear">clear</a></li><li data-type='method' style='display: none;'><a href="module-FilterSearch.html#~clearSearchHighlights">clearSearchHighlights</a></li></ul></li><li><a href="module-HomeButton.html">HomeButton</a></li><li><a href="module-Modal.html">Modal</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-Modal.html#~errorHandler">errorHandler</a></li><li data-type='method' style='display: none;'><a href="module-Modal.html#~evaluateZoomVisibility">evaluateZoomVisibility</a></li><li data-type='method' style='display: none;'><a href="module-Modal.html#~remove">remove</a></li><li data-type='method' style='display: none;'><a href="module-Modal.html#~show">show</a></li></ul></li><li></li><li><a href="module-MoveablePopup.html">MoveablePopup</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-MoveablePopup.html#~checkXPosition">checkXPosition</a></li><li data-type='method' style='display: none;'><a href="module-MoveablePopup.html#~checkYPosition">checkYPosition</a></li></ul></li><li><a href="module-OmniSearch.html">OmniSearch</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-OmniSearch.html#~fireCustomQuery">fireCustomQuery</a></li><li data-type='method' style='display: none;'><a href="module-OmniSearch.html#~fireCustomQuery">fireCustomQuery</a></li><li data-type='method' style='display: none;'><a href="module-OmniSearch.html#~hide">hide</a></li><li data-type='method' style='display: none;'><a href="module-OmniSearch.html#~isSearchFilterButtonToggled">isSearchFilterButtonToggled</a></li></ul></li><li><a href="module-OmniSearch_widgets_OmniResult.html">OmniSearch/widgets/OmniResult</a></li><li><a href="module-OmniSearch_widgets_SearchFilterButton.html">OmniSearch/widgets/SearchFilterButton</a></li><li><a href="module-Popup.html">Popup</a></li><li><a href="module-Popup_widgets_PopupGrid.html">Popup/widgets/PopupGrid</a></li><li><a href="module-RadioBoxTable.html">RadioBoxTable</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-RadioBoxTable.html#~reset">reset</a></li><li data-type='method' style='display: none;'><a href="module-RadioBoxTable.html#~update">update</a></li><li data-type='method' style='display: none;'><a href="module-RadioBoxTable.html#~updateSelection">updateSelection</a></li></ul></li><li><a href="module-ResultsPane.html">ResultsPane</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-ResultsPane.html#~resizeResultsTable">resizeResultsTable</a></li></ul></li><li><a href="module-ResultsPane_widgets_AreaTemporalMetrics_widgets_ChartOptions.html">ResultsPane/widgets/AreaTemporalMetrics/widgets/ChartOptions</a></li><li><a href="module-ResultsPane_widgets_AreaTemporalMetrics_widgets_ChartTabs.html">ResultsPane/widgets/AreaTemporalMetrics/widgets/ChartTabs</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-ResultsPane_widgets_AreaTemporalMetrics_widgets_ChartTabs.html#~getGraphData">getGraphData</a></li><li data-type='method' style='display: none;'><a href="module-ResultsPane_widgets_AreaTemporalMetrics_widgets_ChartTabs.html#~initiateChart">initiateChart</a></li><li data-type='method' style='display: none;'><a href="module-ResultsPane_widgets_AreaTemporalMetrics_widgets_ChartTabs.html#~updateCharts">updateCharts</a></li></ul></li><li><a href="module-ResultsPane_widgets_AreaTemporalMetrics_widgets_SpeedChart.html">ResultsPane/widgets/AreaTemporalMetrics/widgets/SpeedChart</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-ResultsPane_widgets_AreaTemporalMetrics_widgets_SpeedChart.html#~createChart">createChart</a></li><li data-type='method' style='display: none;'><a href="module-ResultsPane_widgets_AreaTemporalMetrics_widgets_SpeedChart.html#~prepData">prepData</a></li><li data-type='method' style='display: none;'><a href="module-ResultsPane_widgets_AreaTemporalMetrics_widgets_SpeedChart.html#~update">update</a></li></ul></li><li><a href="module-ResultsPane_widgets_AreaTemporalMetrics_widgets_TemporalChart.html">ResultsPane/widgets/AreaTemporalMetrics/widgets/TemporalChart</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-ResultsPane_widgets_AreaTemporalMetrics_widgets_TemporalChart.html#~createChart">createChart</a></li><li data-type='method' style='display: none;'><a href="module-ResultsPane_widgets_AreaTemporalMetrics_widgets_TemporalChart.html#~prepData">prepData</a></li><li data-type='method' style='display: none;'><a href="module-ResultsPane_widgets_AreaTemporalMetrics_widgets_TemporalChart.html#~update">update</a></li></ul></li><li><a href="module-ResultsPane_widgets_ExportCSV.html">ResultsPane/widgets/ExportCSV</a></li><li><a href="module-ResultsPane_widgets_ExportCrashRecords.html">ResultsPane/widgets/ExportCrashRecords</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-ResultsPane_widgets_ExportCrashRecords.html#~enableSpinner">enableSpinner</a></li><li data-type='method' style='display: none;'><a href="module-ResultsPane_widgets_ExportCrashRecords.html#~exportRecords">exportRecords</a></li></ul></li><li><a href="module-ResultsPane_widgets_FilterSummary.html">ResultsPane/widgets/FilterSummary</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-ResultsPane_widgets_FilterSummary.html#~formatYearFilter">formatYearFilter</a></li><li data-type='method' style='display: none;'><a href="module-ResultsPane_widgets_FilterSummary.html#~removeLabels">removeLabels</a></li><li data-type='method' style='display: none;'><a href="module-ResultsPane_widgets_FilterSummary.html#~update">update</a></li></ul></li><li><a href="module-ResultsPane_widgets_ResultsGrid.html">ResultsPane/widgets/ResultsGrid</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-ResultsPane_widgets_ResultsGrid.html#~compare_cty_code">compare_cty_code</a></li><li data-type='method' style='display: none;'><a href="module-ResultsPane_widgets_ResultsGrid.html#~compare_muni_code">compare_muni_code</a></li><li data-type='method' style='display: none;'><a href="module-ResultsPane_widgets_ResultsGrid.html#~exportCsv">exportCsv</a></li><li data-type='method' style='display: none;'><a href="module-ResultsPane_widgets_ResultsGrid.html#~hide">hide</a></li><li data-type='method' style='display: none;'><a href="module-ResultsPane_widgets_ResultsGrid.html#~removeDuplicateObjects">removeDuplicateObjects</a></li><li data-type='method' style='display: none;'><a href="module-ResultsPane_widgets_ResultsGrid.html#~removeHighlight">removeHighlight</a></li><li data-type='method' style='display: none;'><a href="module-ResultsPane_widgets_ResultsGrid.html#~resize">resize</a></li><li data-type='method' style='display: none;'><a href="module-ResultsPane_widgets_ResultsGrid.html#~show">show</a></li><li data-type='method' style='display: none;'><a href="module-ResultsPane_widgets_ResultsGrid.html#~update">update</a></li></ul></li><li><a href="module-SettingsMenu.html">SettingsMenu</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-SettingsMenu.html#~disableClusterToggleButton">disableClusterToggleButton</a></li><li data-type='method' style='display: none;'><a href="module-SettingsMenu.html#~hide">hide</a></li><li data-type='method' style='display: none;'><a href="module-SettingsMenu.html#~show">show</a></li><li data-type='method' style='display: none;'><a href="module-SettingsMenu.html#~startTour">startTour</a></li></ul></li><li><a href="module-SettingsMenu_widgets_BasemapToggle.html">SettingsMenu/widgets/BasemapToggle</a></li><li><a href="module-SettingsMenu_widgets_ClusterToggle.html">SettingsMenu/widgets/ClusterToggle</a></li><li><a href="module-SettingsMenu_widgets_CrashClusterSelect.html">SettingsMenu/widgets/CrashClusterSelect</a></li><li><a href="module-SettingsMenu_widgets_MenuAnnotationToggle.html">SettingsMenu/widgets/MenuAnnotationToggle</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-SettingsMenu_widgets_MenuAnnotationToggle.html#~setAnnotationMode">setAnnotationMode</a></li></ul></li><li><a href="module-SettingsMenu_widgets_SignalsTourToggle_widgets_WelcomeTour.html">SettingsMenu/widgets/SignalsTourToggle/widgets/WelcomeTour</a></li><li><a href="module-SettingsMenu_widgets_TourToggle.html">SettingsMenu/widgets/TourToggle</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-SettingsMenu_widgets_TourToggle.html#~mouseEnterHandler">mouseEnterHandler</a></li><li data-type='method' style='display: none;'><a href="module-SettingsMenu_widgets_TourToggle.html#~mouseLeaveHandler">mouseLeaveHandler</a></li></ul></li><li><a href="module-SettingsMenu_widgets_UserManual.html">SettingsMenu/widgets/UserManual</a></li><li><a href="module-StatsExplorer.html">StatsExplorer</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-StatsExplorer.html#~clear">clear</a></li><li data-type='method' style='display: none;'><a href="module-StatsExplorer.html#~clearChart">clearChart</a></li><li data-type='method' style='display: none;'><a href="module-StatsExplorer.html#~clearVehicleChartDivs">clearVehicleChartDivs</a></li><li data-type='method' style='display: none;'><a href="module-StatsExplorer.html#~createChart">createChart</a></li><li data-type='method' style='display: none;'><a href="module-StatsExplorer.html#~createPersonsSeverityChart">createPersonsSeverityChart</a></li><li data-type='method' style='display: none;'><a href="module-StatsExplorer.html#~createSelect">createSelect</a></li><li data-type='method' style='display: none;'><a href="module-StatsExplorer.html#~createVehicleModelChart">createVehicleModelChart</a></li><li data-type='method' style='display: none;'><a href="module-StatsExplorer.html#~createVehiclesAttributeChart">createVehiclesAttributeChart</a></li><li data-type='method' style='display: none;'><a href="module-StatsExplorer.html#~generateVehicleChartDivs">generateVehicleChartDivs</a></li><li data-type='method' style='display: none;'><a href="module-StatsExplorer.html#~init">init</a></li><li data-type='method' style='display: none;'><a href="module-StatsExplorer.html#~loading">loading</a></li><li data-type='method' style='display: none;'><a href="module-StatsExplorer.html#~loadingDiv">loadingDiv</a></li><li data-type='method' style='display: none;'><a href="module-StatsExplorer.html#~update">update</a></li><li data-type='method' style='display: none;'><a href="module-StatsExplorer.html#~updateSeverityChart">updateSeverityChart</a></li><li data-type='method' style='display: none;'><a href="module-StatsExplorer.html#~updateStatsChart">updateStatsChart</a></li><li data-type='method' style='display: none;'><a href="module-StatsExplorer.html#~updateVehicleMakeChart">updateVehicleMakeChart</a></li></ul></li><li><a href="module-StatsPane.html">StatsPane</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-StatsPane.html#~checkOpen">checkOpen</a></li><li data-type='method' style='display: none;'><a href="module-StatsPane.html#~init">init</a></li><li data-type='method' style='display: none;'><a href="module-StatsPane.html#~togglePane">togglePane</a></li><li data-type='method' style='display: none;'><a href="module-StatsPane.html#~update">update</a></li></ul></li><li><a href="module-Utilities.html">Utilities</a></li><li><a href="module-urls.html">urls</a></li></ul>
    
</nav>

<div id="main">
    
    <h1 class="page-title">API/index.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import urls from '../urls';

// const base = 'http://127.0.0.1:50000';
// const baseURL = 'https://gpi.services/test-api';
const baseURL = '../api';
const adminBase = baseURL + '/admin';

/**
 * The constructor for API calls. Gets and sets the user's credentials used to additional API calls throughout the module.
 * @date 2024-10-30
 * @module API
 */
export default function(startYear, endYear) {
    const self = this;

    /**
     * @static
     * A data dictionary of static URLs to get module information.
     */
    this.routeURL = {
        base: baseURL,
        getSessionInfo: 'https://njvoyagerbeta.org/Shibboleth.sso/Session',
        getFullName: `${adminBase}/get-full-name?`,
        getModules: `${adminBase}/get-menu-info`,
        getNotifications: `${adminBase}/get-menu-info`,
    };

    /**
     * Retrieves session information from the server and updates user-related data.
     *
     * Fetches session information, including the username and session expiration time, from the server's session info route.
     * If the fetch or processing of data fails, defaults to a predefined username.
     *
     * @function getSessionInfo
     * @returns {Promise&lt;Object>} A promise that resolves to the session data object.
     * @date 2024-11-20
     */
    this.getSessionInfo = () => {
        // don't use the getData route because we don't have session info yet
        return fetch(self.routeURL.getSessionInfo).then((response) => {
            return response.json().then((data) => {
                const username = data.attributes[0].values[0];
                let expiration = new Date();

                expiration.setMinutes(data.expiration + expiration.getMinutes());

                self.username = username;
                self.expiration = expiration;
                return data;
            });
        });
    };

    this.credentials = this.getSessionInfo();

    /**
     * Fetches data from the provided URL with optional filters and format.
     
     * @date 2024-10-14
     * @function getData
     * @param {string} [url=''] - The base URL for the data request.
     * @param {Object} [filters={}] - Key-value pairs to be appended as query parameters to the URL.
     * @param {string} [format='json'] - The expected format of the response ('json', 'blob', or others).
     * @returns {Promise&lt;Object|string|Response>} A promise that resolves to the data in the specified format:
     * - JSON object if `format` is 'json'
     * - Blob URL if `format` is 'blob'
     * - Raw response if other format is specified
     * 
     * @example
     * // Example usage with filters and JSON format
     * getData('https://api.example.com/data', { username: 'johndoe@test.com', years: '2021,2022,2024', veh_contr_circum: '01,04,06' })
     *    .then(data => console.log(data))
     *    .catch(error => console.error(error));
     */
    this.getData = (url = '', filters = {}, format = 'json') => {
        const searchParams = new URLSearchParams(filters);
        const dataURL = url + searchParams.toString();
            return fetch(dataURL, {
                headers: {
                    credentials: JSON.stringify({ username: self.credentials.username }),
                },
            })
                .then((response) => {
                    if (response.status === 200) {
                        if (format === 'json') {
                            return response.json().then((data) => {
                                return data;
                            });
                        } else if ((format = 'blob')) {
                            return response.blob().then((blob) => {
                                return URL.createObjectURL(blob);
                            });
                        } else {
                            return response;
                        }
                    } else {
                        //console.log('issue with request', response);
                    }
                })
                .catch(self.errorHandler);
        
    };

    /**
     * Sends a POST request to the specified URL with the provided data.
     
     * @date 2024-10-14
     * @function postData
     * @param {string} [url=''] - The URL to send the POST request to.
     * @param {Object} [data={}] - The data to be sent in the body of the request.
     * @returns {Promise&lt;Object>} A promise that resolves to the response data parsed as JSON.
     * @example
     * // Example usage with POST data
     * postData('https://api.example.com/submit', { username: 'johndoe@test.com' })
     *    .then(response => console.log(response))
     *    .catch(error => console.error(error));
     */  
    this.postData = (url = '', data = {}, type = 'json') => {
        return self.credentials.then(() => {
            return fetch(url, {
                method: 'POST', // *GET, POST, PUT, DELETE, etc.
                mode: 'cors', // no-cors, *cors, same-origin
                cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached
                credentials: 'same-origin', // include, *same-origin, omit
                headers: {
                    credentials: JSON.stringify({ username: self.username }),
                    'Content-Type': 'application/json'
                    // 'Content-Type': 'application/x-www-form-urlencoded',
                },
                redirect: 'follow', // manual, *follow, error
                referrer: 'no-referrer', // no-referrer, *client
                body: JSON.stringify(data) // body data type must match "Content-Type" header
            })
                .then((response) => {
                    if (response.status === 200) {
                        if (type === 'json') {
                            return response.json().then((data) => {
                                return data;
                            });
                        } else if (type === 'blob') {
                            return response;
                        }
                    } else {
                        return Promise.resolve({
                            features: [],
                            type: 'FeatureCollection'
                        });
                    }
                })
                .then((features) => {
                    return features;
                })
                .catch(self.errorHandler);
        })
    };

    /**
     * Error handling and session expiration management for Safety Voyager.
     * 
     * @function errorHandler
     * @param {Object} error - The error object received during an operation.
     * Handles 498 HTTP status codes and redirects to the login page when credentials time out.
     */
    this.errorHandler = (error) => {
        console.error(error);
        if (error.httpCode === 498 || error.details.error.details.httpStatus === 498) {
            var redirectDialog = new Dialog({
                title: 'Credentials Timed Out',
                content:
                    'Your session has expired. In order to continue using Safety Voyager you must sign in again. Closing this dialog will redirect to the login where you will be able to sign in again.',
                style: "width: 400px;  font-size: 14px; font-family: 'Avenir Next W00','Helvetica Neue',Helvetica,Arial,sans-serif;",
                closable: true,
                onHide: function () {
                    redirectDialog.destroy();
                    window.location = loginURL;
                },
            });
            redirectDialog.show();
        }
    };

    /**
     * @function getFullName
     * @returns {Promise} A promise resolving to the full name of the user.
     * Fetches the full name of the user by sending a request with the current username after credentials are loaded.
     */
    this.getFullName = function () {
        // uses credentials, so need to wait till session info returns
        return self.credentials.then(() => {
            return self.getData(self.routeURL.getFullName, { User: self.username });
        });
    };

    /**
     * @function getModules
     * @returns {Promise} A promise resolving to the list of modules accessible to the user.
     * Retrieves the user's accessible modules based on the username after credentials are loaded.
     */
    this.getModules = function () {
        // uses credentials, so need to wait till session info returns
        return self.credentials.then(() => {
            return self.getData(`${self.routeURL.getModules}/${self.username}`);
        });
    };

    /**
     * @function getNotifications
     * @returns {Promise} A promise resolving to the notifications for the user.
     * Fetches the user's notifications after credentials are loaded.
     */
    this.getNotifications = function () {
        // uses credentials, so need to wait till session info returns
        return self.credentials.then(() => {
            return self.getData(self.routeURL.getNotifications, { User: self.username });
        });
    };

    /**
     * Gets a list of MPOs from the server to populate dropdown. Can also be used to select MPO by code or selection geometry.
     * @date 2024-10-30
     * @function getMPO
     * @returns {object[]} An array containing data objects of all 3 MPOs.
     */
    this.getMPO = function(geom = false, mpoCode = '') {
        // should add the mpo boundaries to the server at some point
        // const dataURL = urls.base + 'query/public.county_boundaries_of_nj?columns=county_label,fipsco';
        // const filters = Object.assign({}, countyCode); // make a clone!
        // return fetch(dataURL + Object.keys(filters).map(key => key + '=' + filters[key]).join('&amp;')).then(response => response.json()).then(data => { return data });
        return ([
            {
                title: 'DVRPC',
                code: 'dvrpc',
                counties: ['03', '04', '08', '11'],
            },
            {
                title: 'NJTPA',
                code: 'njtpa',
                counties: ['02', '07', '09', '10', '12', '13', '14', '15', '16', '18', '19', '20', '21'],
            },
            {
                title: 'SJTPO',
                code: 'sjtpo',
                counties: ['01', '05', '06', '17'],
            },
        ]);
    }

    /**
     * Gets the county boundary geometry.
     * @date 2024-10-30
     * @function getCountyBoundaries
     * @param {object} selectedFilters An object containing all selected filters.
     * @returns {object} An object containing the URL endpoint to get boundary data.
     */
    this.getCountyBoundaries = function(selectedFilters) {
        var filterObject = {
            geom_column: 'geom_simplified',
            columns: 'county,mun_cty_co',
        };

        if (selectedFilters) {
            if (selectedFilters.hasOwnProperty('mun_cty_co')) {
                const splitInputList = String(selectedFilters.mun_cty_co).split(',');
                const formattedList = "'" + splitInputList.join("','") + "'";
                filterObject.filter = `mun_cty_co IN (${formattedList})`;
            }
        }

        var searchParams = new URLSearchParams(filterObject);
        const query = `${urls.countyJurisdictionsURL}{z}/{x}/{y}?` + searchParams.toString();
        return {
            tileEndpoint: query,
        };
    }

    /**
     * Gets the municipality boundary geometry.
     * @date 2024-10-30
     * @function getMunicipalityBoundaries
     * @param {object} selectedFilters An object containing all selected filters.
     * @returns {object} An object containing the URL endpoint to get boundary data.
     */
    this.getMunicipalityBoundaries = (selectedFilters) => {
        var filterObject = {
            geom_column: 'geom_simplified',
            columns: 'mun_mu,county,mun_cty_co'
        };
        if (selectedFilters) {
            if (selectedFilters.hasOwnProperty('mun_cty_co')) {
                const splitInputList = String(selectedFilters.mun_cty_co).split(',');
                const formattedList = "'" + splitInputList.join("','") + "'";
                filterObject.filter = `mun_cty_co IN (${formattedList})`;
            } else if (selectedFilters.hasOwnProperty('mun_mu')) {
                const splitInputList = String(selectedFilters.mun_mu).split(',');
                const formattedList = "'" + splitInputList.join("','") + "'";
                filterObject.filter = `ssn IN (${formattedList})`;
            }
        }

        var searchParams = new URLSearchParams(filterObject);
        // const query = `${urls.base}/mvt/municipal_boundaries_of_nj_3857/{z}/{x}/{y}?` + searchParams.toString();
        const query = `${urls.municipalJurisdictionsURL}{z}/{x}/{y}?` + searchParams.toString();
        return {
            tileEndpoint: query
        };
    }

    /**
     * Gets crash data objects along a route.
     * @date 2024-10-30
     * @function getRouteCrashData
     * @param {object} selectedFilters An object containing all selected filters.
     * @returns {object[]} An array containing crash data objects along a route.
     * @example
     * console.log(getRouteCrashData(selectedFilters));   // [{crashid: '04-15-2022-2022-20461', acc_case: '2022-20461', calc_latitude: '39.815995', calc_longitude: '-75.068089', sri: '00000168__', …}, ...]
     */
    this.getRouteCrashData = async (selectedFilters) => {
        let searchParams;
        let route_histogram_source_url;
        if (selectedFilters.sri) {
            searchParams = new URLSearchParams({
                filter: JSON.stringify(selectedFilters)
            });

            route_histogram_source_url = `${urls.sriHistogramURL}` + searchParams.toString();
            return self.getData(route_histogram_source_url)
        } else {
            const message = `No SRI was specified, filter specified: ${selectedFilters}`;
            throw new Error(message);
        }
    }

    /**
     * Gets the attribute data for an SRI.
     * @param {object} selectedFilters An object containing all selected filters.
     * @returns {object} attribute data for an SRI
     */
    this.getNetworkSegmentData = async (selectedFilters) => {
        let searchParams;
        let route_histogram_source_url;
        if (selectedFilters.sri) {
            searchParams = new URLSearchParams({
                filter: JSON.stringify(selectedFilters),
            });

            route_histogram_source_url = `${urls.sriHistogramURL}` + searchParams.toString();
            return self.getData(route_histogram_source_url)
        } else {
            const message = `No SRI was specified, filter specified: ${selectedFilters}`;
            throw new Error(message);
        }
    }

    /**
     * Gets crash data along an SRI grouped by a category `breakdownField`.
     * @date 2024-10-30
     * @function getSRIBreakdown
     * @param {object} selectedFilters An object containing all selected filters.
     * @param {string} breakdownField The category to group crashes by. Options: "crash_type","surf_cond_code","road_median_code","year","acc_dow","environ_cond_code","road_char_code","surf_cond_code","dept_num","ramp_direction","light_cond_code".
     * @returns {object[]} An array containing crash count objects along a route filted by a category `breakdownField`.
     * @example
     * console.log(getSRIBreakdown(selectedFilters, "crash_type"))    // [{code_value: '01', crash_count: '179'}, ...]
     */ 
    this.getSRIBreakdown = async (selectedFilters, breakdownField) => {
        const searchParams = new URLSearchParams({
            selected_filters: JSON.stringify(selectedFilters),
            breakdown_field: breakdownField
        });
        const dataURL = urls.routeBreakdownURL + searchParams.toString();
            return self.getData(dataURL)
    }

    /**
     * Gets crash data within New Jersey state grouped by a category `breakdownField`.
     * @date 2024-10-30
     * @param {object} selectedFilters An object containing all selected filters.
     * @param {string} breakdownField The category to group crashes by. Options: "crash_type","surf_cond_code","road_median_code","year","acc_dow","environ_cond_code","road_char_code","surf_cond_code","dept_num","ramp_direction","light_cond_code".
     * @returns {object[]} An array containing crash count objects within New Jersey state filted by a category `breakdownField`.
     * @example
     * console.log(getStateBreakdown(selectedFilters, breakdownField))    // [{code_value: '00', crash_count: '22'}, ...]
     */
    this.getStateBreakdown = async (selectedFilters, breakdownField) => {
        const searchParams = new URLSearchParams({
            selected_filters: JSON.stringify(selectedFilters),
            breakdown_field: breakdownField
        });
        const dataURL = urls.stateBreakdownURL + searchParams.toString();
            return self.getData(dataURL)
    }

    /**
     * Creates a `WHERE` clause to query the database with based on selected filter parameters.
     * @date 2024-10-23
     * @function  CreateWhereClause
     * @param {object} filterParameters An object containing query parameters.
     * @param {string} geomColumn The name of the geometry column in the database.
     * @param {string} type=null The code to group data by in the query. Options include: 'muni', 'county'.
     * @returns {string} The `WHERE` clause to query the database with.
     */
    this.createWhereClause = (filterParameters, geomColumn, type = null) => {
        var queryStringArray = [];

        if (filterParameters.summary.value !== 'nj-summary') {
            if (filterParameters.summary.value == 'loc-summary' || filterParameters.summary.value == 'mpo-summary') {
                if (filterParameters.locationFilters.cty_code.value) {
                    if (filterParameters.locationFilters.cty_code.value.includes(',')) {
                        var strArray = [];
                        var splitString = filterParameters.locationFilters.cty_code.value.split(',');
                        splitString.forEach((element) => {
                            strArray.push("'" + element + "'");
                        });
                        queryStringArray.push('mun_cty_co IN (' + strArray.join(',') + ')');
                    } else {
                        queryStringArray.push("mun_cty_co = '" + filterParameters.locationFilters.cty_code.value + "'");
                    }
                }
                if (filterParameters.locationFilters.muni_code.value) {
                    queryStringArray.push("mun_mu = '" + filterParameters.locationFilters.muni_code.value + "'");
                }
            } else if (filterParameters.summary.value == 'sri-summary' &amp;&amp; filterParameters.locationFilters.sri.value) {
                queryStringArray.push("calc_sri = '" + filterParameters.locationFilters.sri.value + "'");
            }
        }

        queryStringArray.push(
            '(year >= ' + filterParameters.getStartYear() + ' AND year &lt;= ' + filterParameters.getEndYear() + ')'
        );
        var joinedString = queryStringArray.join(' AND ');

        if (geomColumn !== 'geom') {
            if (type == 'muni') {
                joinedString +=
                    '  GROUP BY muni_data.mun, muni_data.mun_mu, muni_data.county, muni_data.mun_cty_co, crash_data.' +
                    geomColumn;
            } else if (type == 'county') {
                joinedString += ' GROUP BY county_data.county, crash_data.mun_cty_co, county_data.' + geomColumn;
            }
        }

        return joinedString;
    }

    /**
     * Creates a `WHERE` clause to query the database with based on selected filter parameters.
     * @date 2024-10-23
     * @function CreateDetailWhereClause
     * @param {object} filterParameters An object containing query parameters.
     * @param {string} geomColumn The column name for the geometry in the database,
     * @returns {string} The `WHERE` clause to query the database with.
     */
    this.createDetailWhereClause = (filterParameters, geomColumn) => {
        var queryStringArray = [];
        if (filterParameters.summary.value !== 'nj-summary') {
            if (filterParameters.summary.value == 'loc-summary' || filterParameters.summary.value == 'mpo-summary') {
                if (filterParameters.locationFilters.cty_code.value) {
                    if (filterParameters.locationFilters.cty_code.value.includes(',')) {
                        var strArray = [];
                        var splitString = filterParameters.locationFilters.cty_code.value.split(',');
                        splitString.forEach((element) => {
                            strArray.push("'" + element + "'");
                        });
                        queryStringArray.push('mun_cty_co IN (' + strArray.join(',') + ')');
                    } else {
                        queryStringArray.push("mun_cty_co = '" + filterParameters.locationFilters.cty_code.value + "'");
                    }
                }
                if (filterParameters.locationFilters.muni_code.value) {
                    queryStringArray.push("mun_mu = '" + filterParameters.locationFilters.muni_code.value + "'");
                }
            } else if (filterParameters.summary.value == 'sri-summary' &amp;&amp; filterParameters.locationFilters.sri.value) {
                queryStringArray.push("calc_sri = '" + filterParameters.locationFilters.sri.value + "'");
            }
        }

        queryStringArray.push(
            '(year >= ' + filterParameters.getStartYear() + ' AND year &lt;= ' + filterParameters.getEndYear() + ')'
        );
        var joinedString = queryStringArray.join(' AND ');

        if (geomColumn !== 'geom') {
            if (type == 'muni') {
                joinedString += ' GROUP BY mun, mun_mu, county, mun_cty_co, ' + geomColumn;
            } else if (type == 'county') {
                joinedString += ' GROUP BY county, mun_cty_co, ' + geomColumn;
            }
        }

        return joinedString;
    }

    /**
     * Gets the crashes at a milepost along an SRI.
     * @date 2024-10-23
     * @function GetAccidentsBySriQuery
     * @param {string} sri The target SRI to search for crashes.
     * @param {string | number} mp The target milepost to search for crashes.
     * @param {object} filterParameters An object containing query parameters.
     * @returns {string} The URL endpoint to get the crashes at a milepost along an SRI.
     */
    this.getAccidentsBySriQuery = (sri, mp, filterParameters) => {
        var searchParams = new URLSearchParams({
            geom_column: 'geom',
            columns:
                'crashid, year, mun_cty_co, mun_mu, acc_case, dln, calc_sri, calc_milepost, calc_latitude, calc_longitude, mercatorx, mercatory, dept_num, dept_name, station, acc_date, acc_dow, acc_time, severity_code, intersection, alcohol_involved, hazmat_involved, hs_collision_type, hs_fixed_object, crash_type, tot_veh_involved, location, location_dir, road_sys_code, road_char_code, road_horiz_align_code, road_grade_code, road_surf_code, surf_cond_code, light_cond_code, environ_cond_code, road_median_code, temp_traffic_zone, dist_to_xstreet, dist_xstreet_unit, dir_from_xstreet, xstreet_name, is_ramp, ramp_route, ramp_direction, posted_speed, posted_speed_xstreet, first_harmful_event, other_prop_damage, flg_cell_in_use, driver_phys_apptly_nrml, driver_phys_alcl_use, driver_phys_drug_use_illicit, driver_phys_medication, driver_phys_alcl_drug_med_use, driver_phys_handicaps, driver_phys_illness, driver_phys_fatigue, driver_phys_fell_aslp, driver_phys_other, driver_phys_unknown, driver_phys_not_recorded, cyclist_involved, occupant_phys_cond_killed, occupant_phys_cond_incapacitated, occupant_phys_cond_moderate_injury, occupant_phys_cond_complaint_pain, occupant_phys_cond_unknown, occupant_phys_cond_not_recorded, pedestrian_phys_cond_killed, pedestrian_phys_cond_incapacitated, pedestrian_phys_cond_moderate_injury, pedestrian_phys_cond_complaint_pain, pedestrian_phys_cond_unknown, functional_class, hit_run, ped_incapacitated, cyclist_killed, cyclist_incapacitated, cyclist_complaint_of_pain, cyclist_moderate_pain, veh_one_travel_dir_code, veh_two_travel_dir_code',
            filter: `
    calc_sri = '${sri}'
    AND calc_milepost = ${mp}
    AND year BETWEEN ${filterParameters.getStartYear()}
    AND ${filterParameters.getEndYear()}
    `
        });
        var table = self.getTable(filterParameters) + '_crashes';
        var query = urls.emphasisAreaGeojsonURL + table + '?' + searchParams.toString();
        return query;
    }

    /**
     * Creates the URL endpoint to get crash attributes.
     * @date 2024-10-23
     * @function CreateSearchParameters
     * @param {string} whereClause The generated `WHERE` clause based on the selected filter parameters.
     * @param {function} bounds The bounds function from the Mapbox map of the current map view.
     * @param {any} basic=true If true, returns the crash ID only. If false, returns the crash's attributes.
     * @returns {string} The URL endpoint to get crash attributes.
     */
    this.createSearchParameters = (whereClause, bounds, basic = true) => {
        var query = new URLSearchParams({
            geom_column: 'geom',
            columns: basic
                ? 'crashid'
                : 'crashid, year, mun_cty_co, mun_mu, acc_case, dln, calc_sri, calc_milepost, calc_latitude, calc_longitude, mercatorx, mercatory, dept_num, dept_name, station, acc_date, acc_dow, acc_time, severity_code, intersection, alcohol_involved, hazmat_involved, hs_collision_type, hs_fixed_object, crash_type, tot_veh_involved, location, location_dir, road_sys_code, road_char_code, road_horiz_align_code, road_grade_code, road_surf_code, surf_cond_code, light_cond_code, environ_cond_code, road_median_code, temp_traffic_zone, dist_to_xstreet, dist_xstreet_unit, dir_from_xstreet, xstreet_name, is_ramp, ramp_route, ramp_direction, posted_speed, posted_speed_xstreet, first_harmful_event, other_prop_damage, flg_cell_in_use, driver_phys_apptly_nrml, driver_phys_alcl_use, driver_phys_drug_use_illicit, driver_phys_medication, driver_phys_alcl_drug_med_use, driver_phys_handicaps, driver_phys_illness, driver_phys_fatigue, driver_phys_fell_aslp, driver_phys_other, driver_phys_unknown, driver_phys_not_recorded, cyclist_involved, occupant_phys_cond_killed, occupant_phys_cond_incapacitated, occupant_phys_cond_moderate_injury, occupant_phys_cond_complaint_pain, occupant_phys_cond_unknown, occupant_phys_cond_not_recorded, pedestrian_phys_cond_killed, pedestrian_phys_cond_incapacitated, pedestrian_phys_cond_moderate_injury, pedestrian_phys_cond_complaint_pain, pedestrian_phys_cond_unknown, functional_class, hit_run, ped_incapacitated, cyclist_killed, cyclist_incapacitated, cyclist_complaint_of_pain, cyclist_moderate_pain, veh_one_travel_dir_code, veh_two_travel_dir_code',
            // columns: 'crashid, year, mun_cty_co, mun_mu, acc_case, dln, calc_sri, calc_milepost, calc_latitude, calc_longitude, mercatorx, mercatory, dept_num, dept_name, station, acc_date, acc_dow, acc_time, severity_code, intersection, alcohol_involved, hazmat_involved, hs_collision_type, hs_fixed_object, crash_type, tot_veh_involved, location, location_dir, road_sys_code, road_char_code, road_horiz_align_code, road_grade_code, road_surf_code, surf_cond_code, light_cond_code, environ_cond_code, road_median_code, temp_traffic_zone, dist_to_xstreet, dist_xstreet_unit, dir_from_xstreet, xstreet_name, is_ramp, ramp_route, ramp_direction, posted_speed, posted_speed_xstreet, first_harmful_event, other_prop_damage, flg_cell_in_use, driver_phys_apptly_nrml, driver_phys_alcl_use, driver_phys_drug_use_illicit, driver_phys_medication, driver_phys_alcl_drug_med_use, driver_phys_handicaps, driver_phys_illness, driver_phys_fatigue, driver_phys_fell_aslp, driver_phys_other, driver_phys_unknown, driver_phys_not_recorded, cyclist_involved, occupant_phys_cond_killed, occupant_phys_cond_incapacitated, occupant_phys_cond_moderate_injury, occupant_phys_cond_complaint_pain, occupant_phys_cond_unknown, occupant_phys_cond_not_recorded, pedestrian_phys_cond_killed, pedestrian_phys_cond_incapacitated, pedestrian_phys_cond_moderate_injury, pedestrian_phys_cond_complaint_pain, pedestrian_phys_cond_unknown, functional_class, hit_run, ped_incapacitated, cyclist_killed, cyclist_incapacitated, cyclist_complaint_of_pain, cyclist_moderate_pain, veh_one_travel_dir_code, veh_two_travel_dir_code',
            filter: whereClause
        });
        if (bounds) {
            var sw = bounds.getSouthWest();
            var ne = bounds.getNorthEast();
            query += '&amp;bounds=' + sw.lng + '%2C' + sw.lat + '%2C' + ne.lng + '%2C' + ne.lat;
        }
        return query;
    }

    /**
     * Gets the database table name for an Emphasis Area category.
     * @date 2024-10-23
     * @function getTable
     * @param {object} filterParameters An object containing query parameters.
     * @returns {string} The database table to query data from.
     */
    this.getTable = (filterParameters) => {
        let catValue;

        if (filterParameters.subCategory) {
            if (filterParameters.subCategory.value) {
                catValue = filterParameters.subCategory.value;
            } else {
                catValue = filterParameters.category.value;
            }
        } else {
            catValue = filterParameters.category.value;
        }

        let tableBase = emphasisAreaSelections.getTable(catValue);
        let returnTable = tableBase;

        return returnTable;
    }

    /**
     * Gets crashes within an area based on the selected filter parameters.
     * @date 2024-10-23
     * @function GetCrashesQuery
     * @param {object} filterParameters An object containing query parameters.
     * @param {function} bounds The bounds function from the Mapbox map of the current map view.
     * @returns {string} The URL endpoint to get crashes within an area. 
     */
    this.getCrashesQuery = (filterParameters, bounds) => {
        var table = getTable(filterParameters) + '_crashes';
        var whereClause = CreateWhereClause(filterParameters, 'geom');
        var searchParams = CreateSearchParameters(whereClause, bounds);
        var query = urls.emphasisAreaGeojsonURL + table + '?' + searchParams.toString();
        return query;
    }

    /**
     * Gets crash attributes for an array of crash IDs.
     * @date 2024-10-23
     * @function getCrash
     * @param {string[]} crashArray An array of crash IDs.
     * @returns {object[]} An array of objects where each object contains the attributes of a crash.
     */
    this.getCrash = (crashArray, year) => {
        return self.postData(urls.crashURL, { crash_array: crashArray, year: year }).then((response) => {
            if (response.tokenError) {
                console.error(response);
            } else {
                return response;
            }
        });
    }

    /**
     * Gets a list of crash data based on selected filters.
     * @date 2024-10-30
     * @function getCrashList
     * @param {object} selectedFilters An object containing all selected filters.
     * @returns {object[]} An array of crash data objects.
     * @example
     * console.log(getCrashList(selectedFilters));   // [{crashid: '04-15-2022-2022-20461', acc_case: '2022-20461', calc_latitude: '39.815995', calc_longitude: '-75.068089', sri: '00000168__', …}, ...]
     */
    this.getCrashList = (selectedFilters) => {
        var filterObject = {};
    
        if (selectedFilters) {
            filterObject.selected_filters = JSON.stringify(selectedFilters);
        } else {
            for (let year = startYear; year &lt;= endYear; year++) {
                years.push(year);
              }
              
            let result = years.join(',');
            filterObject.selected_filters['year'] = result;
        }
    
        return self.getData(urls.crashListURL, filterObject).then(function (response) {
            if (response.tokenError) {
                console.error(response);
            } else {
                return response;
            }
        });
    }

    /**
     * Gets crash data and formats as a CSV file based on the inputted crash ID array.
     * @date 2024-10-30
     * @function getExportRecordsByID
     * @param {string[]} crashArray A list of crash IDs to export crash data for.
     * @returns {Promise&lt;string>} A URL to download the CSV export.
     */
    this.getExportRecordsByID = (crashArray) => {
        return self.postData(urls.exportRecordsCrashIDURL, { crash_array: crashArray }, 'blob').then((response) => {
            if (response.tokenError) {
                console.error(response);
            } else {
                return response;
            }
        });
    }

    /**
     * Gets a crash's details based on the selected filter parameters.
     * @date 2024-10-23
     * @function GetCrashDetailsQuery
     * @param {object} filterParameters An object containing query parameters.
     * @returns {string} The URL endpoint to get a crash's details. 
     */
    this.getCrashDetailsQuery = (filterParameters) => {
        const table = getTable(filterParameters) + '_crashes';
        const whereClause = CreateDetailWhereClause(filterParameters, 'geom');
        const searchParams = CreateSearchParameters(whereClause, false, false);
        const query = urls.emphasisAreaCrashIDQueryURL + table + '?' + searchParams.toString();
        return query;
    }

    /**
     * Creates the URL endpoint to get the heatmap layer for county-level data.
     * @date 2024-10-23
     * @function GetCountyHeatmapQuery
     * @param {object} selectedFilters An object containing query parameters.
     * @returns {object} The tile endpoint URL and source layer name.
     */
    this.getCountyHeatmapQuery = (selectedFilters) => {
        const base = 'county_boundaries_of_nj_3857';
        const filterObject = {};

        if (selectedFilters) {
            if (typeof selectedFilters === 'object') filterObject.selected_filters = JSON.stringify(selectedFilters);
            else filterObject.selected_filters = selectedFilters;
        } else {
            filterObject.selected_filters['year'] = defaultYears;
        }

        const searchParams = new URLSearchParams(filterObject);
        const query = `${urls.countyMvtURL}{z}/{x}/{y}?` + searchParams.toString();

        return {
            tileEndpoint: query,
            sourceLayer: base
        };
    }

    this.getEquityLayerQuery = () => {
        const base = 'equity_layer';
        const query = `${urls.equityLayerMvtURL}{z}/{x}/{y}?`;
    
        return {
            tileEndpoint: query,
            sourceLayer: base,
        };
    }

    /**
     * Creates the URL endpoint to get the crash network segment heatmap layer.
     * @date 2024-10-30
     * @param {object} selectedFilters An object containing query parameters.
     * @returns {object} The tile endpoint URL and source layer name.
     */
    this.getCrashSegmentsHeatmapQuery = (selectedFilters, mapBoundsArray) => {
        const base = 'crash_segments';
        const filterObject = {};
    
        if (selectedFilters) {
            if (typeof selectedFilters === 'object') filterObject.selected_filters = JSON.stringify(selectedFilters);
            else filterObject.selected_filters = selectedFilters;
        } else {
            filterObject.selected_filters['year'] = defaultYears;
        }

        filterObject.map_extent = JSON.stringify(mapBoundsArray);
    
        const searchParams = new URLSearchParams(filterObject);
        const query = `${urls.crashSegmentsMvtURL}{z}/{x}/{y}?` + searchParams.toString();
    
        return {
            tileEndpoint: query,
            sourceLayer: base,
        };
    }

    /**
     * Creates the URL endpoint to get the heatmap layer for municipality-level data.
     * @date 2024-10-23
     * @function GetMuniHeatmapQuery
     * @param {object} selectedFilters An object containing query parameters.
     * @returns {object} The tile endpoint URL and source layer name.
     */
    this.getMuniHeatmapQuery = (selectedFilters) => {
        const base = 'municipal_boundaries_of_nj_3857';
        const filterObject = {};

        if (selectedFilters) {
            if (typeof selectedFilters === 'object') filterObject.selected_filters = JSON.stringify(selectedFilters);
            else filterObject.selected_filters = selectedFilters;
        } else {
            filterObject.selected_filters['year'] = defaultYears;
        }

        const searchParams = new URLSearchParams(filterObject);
        const query = `${urls.municipalMvtURL}{z}/{x}/{y}?` + searchParams.toString();

        return {
            tileEndpoint: query,
            sourceLayer: base
        };
    }

    /**
     * Creates the URL endpoint to get the crash data along an SRI for the 3D historgram view.
     * @date 2024-10-30
     * @function getSRIHistogramQuery
     * @param {object} selectedFilters An object containing query parameters.
     * @returns {object} The tile endpoint URL and source layer name.
     */
    this.getSRIHistogramQuery = (selectedFilters) => {
        const base = 'segment_polygons';
        let stringFilter = JSON.stringify(selectedFilters);

        if (stringFilter === '{}') {
            stringFilter = '1=2';
        }

        const searchParams = new URLSearchParams({
            id_column: 'internal_id',
            selected_filters: stringFilter
        });
        const route_histogram_source_url = `${urls.routeMvtURL}{z}/{x}/{y}?` + searchParams.toString();

        return {
            tileEndpoint: route_histogram_source_url,
            sourceLayer: base
        };
    }

    /**
     * Creates the URL endpoint to get the unlocated crash data along an SRI for the 3D historgram view.
     * @date 2024-10-30
     * @function getSRIUnderlayQuery
     * @param {object} selectedFilters An object containing query parameters.
     * @returns {object} The tile endpoint URL and source layer name.
     */
    this.getSRIUnderlayQuery = (selectedFilters) => {
        const base = 'route_municipal_buffer';
        let stringFilter = JSON.stringify(selectedFilters);

        // if no filter is supplied show nothing
        if (stringFilter === '{}') {
            stringFilter = '1=2';
        }

        const searchParams = new URLSearchParams({
            id_column: 'internal_id',
            selected_filters: stringFilter
        });

        const route_histogram_source_url = `${urls.routeUnmatchedMvtURL}{z}/{x}/{y}?` + searchParams.toString();

        return {
            tileEndpoint: route_histogram_source_url,
            sourceLayer: base
        };
    }

    /**
     * Creates the URL endpoint to get the heatmap layer for crash cluster-level data.
     * @date 2024-10-23
     * @function GetClusterHeatmapQuery
     * @param {object} selectedFilters An object containing query parameters.
     * @returns {object} The tile endpoint URL and source layer name.
     */
    this.getClusterHeatmapQuery = (selectedFilters) => {
        const base = 'public.ard_accidents_geom_partition';
        var filterObject = {};

        if (selectedFilters) {
            filterObject.selected_filters = JSON.stringify(selectedFilters);
        } else {
            filterObject.selected_filters['year'] = defaultYears;
        }
        var searchParams = new URLSearchParams(filterObject);
        const clusterUrl = `${urls.clusterMvtURL}{z}/{x}/{y}?` + searchParams.toString();

        return {
            tileEndpoint: clusterUrl,
            sourceLayer: base
        };
    }

    /**
     * Generates the URL endpoint to get data based on an SRI.
     * @date 2024-10-23
     * @function GetSriQuery
     * @param {object} filterParameters An object containing query parameters.
     * @returns {string} The URL endpoint to get SRIs.
     */
    this.getSriQuery = (filterParameters) => {
        var base = getTable(filterParameters);
        var table = base + '_sri';
        var whereClause = CreateWhereClause(filterParameters, 'wkb_geometry', 'sri');
        var searchParams = new URLSearchParams({
            geom_column: 'wkb_geometry',
            columns: 'calc_sri, calc_milepost, SUM(crashes)::INTEGER crashes, wkb_geometry',
            filter: whereClause,
            group_by: 'calc_sri, calc_milepost, wkb_geometry'
        });
        var query = urls.emphasisAreaGeojsonURL + table + '?' + searchParams.toString();
        return query;
    }

    /**
     * Gets persons data based on selected filter parameters.
     * @date 2024-10-23
     * @function GetPersonsQuery
     * @param {object} filterParameters An object containing query parameters.
     * @param {string[]} crashIds An array of crash IDs.
     * @param {string} type='occupants' The person type to get data for. Other values include 'pedestrians'.
     * @returns {string} The URL to generate an export of table data.
     */
    this.getPersonsQuery = (filterParameters, crashIds, type = 'occupants') => {
        // var crashIds = map.getCrashids();
        if (crashIds == null) return null;
        if (crashIds.length == 0) {
            return null;
        }
        var table = getTable(filterParameters, type);
        table = table + '_' + type;
        return urls.emphasisAreaCrashIDQueryURL + table;
    }

    /**
     * Generates the URL endpoint to get the bounding box for a list of counties.
     * @date 2024-10-30
     * @function getCountyBoundingBoxQuery
     * @param {string} jurisdictionString A comma seperated list of county codes.
     * @returns {string} The URL endpoint to get the bounding box for a list of counties.
     */
    this.getCountyBoundingBoxQuery = (jurisdictionString) => {
        var searchParams = new URLSearchParams({
            county_list: jurisdictionString
        });
        var query = urls.countyBoundingBoxURL + '?' + searchParams.toString();
        return query;
    }

    /**
     * Generates the URL endpoint to get the bounding box for a list of municipalities.
     * @date 2024-10-30
     * @function getMunicipalBoundingBoxQuery
     * @param {string} jurisdictionString A comma seperated list of municipalities codes.
     * @returns {string} The URL endpoint to get the bounding box for a list of municipalities.
     */
    this.getMunicipalBoundingBoxQuery = (jurisdictionString) => {
        var searchParams = new URLSearchParams({
            municipality_list: jurisdictionString
        });
        var query = urls.municipalBoundingBoxURL + '?' + searchParams.toString();
        return query;
    }
    
    /**
     * Returns the URL to submit Feedback form data.
     * @date 2022-02-09
     * @function getFeedbackFormQuery
     */
    this.getFeedbackFormQuery = () => {
        var query = urls.feedbackURL;
        return query;
    }

    /**
     * Returns the URL to get crash record data for a crashid
     * @date 2022-02-09
     * @function getCrashDetailQuery
     * @param {string} crashid - a single crashid
     * @returns {string} URL to query record data for a crashid
     */
    this.getCrashDetailQuery = (crashid, year) => {
        var searchParams = new URLSearchParams({
            crashid: crashid
        });
        if (year != '') searchParams.append('year', year);
        var query = urls.crashDetailURL + searchParams.toString();
        return query;
    }

    /**
     * Generates a URL to export crash records based on a string list of crash IDs or crash filter object with bounding box coordinates.
     * @function getExportRecords
     * @param {object} inputObject - Object containing (1) a string array of crash IDs or (2) the crashFilter object and bounding box coordinates.
     * Option 1: {crashids: "crashid1,crashid2,crashid3"}
     * Option 2: {crashFilter: {...}, boundingBoxMinX: #, boundingBoxMinY: #, boundingBoxMaxX: #, boundingBoxMaxY: #}
     * @returns {string} URL to the CSV file for download
     */
    this.getExportRecords = (queryParams) => {
        const searchParams = new URLSearchParams(queryParams);
        const query = urls.exportRecordsURL + searchParams.toString();

        return query;
    }

    /**
     * Generates a URL to get graph data based on crash filters, map extents, and chart data type.
     * @function getGraphDataQuery
     * @param {object} inputObject - Object containing the crashFilter object,  bounding box coordinates, and dataType.
     * Example: crashFilter: {...}, boundingBoxMinX: #, boundingBoxMinY: #, boundingBoxMaxX: #, boundingBoxMaxY: #, dataType: 'month'}
     * @returns {string} URL to return graph data
     */
    this.getGraphDataQuery = (inputObject) => {
        var searchParams = new URLSearchParams(inputObject);
        var query = urls.graphDatalURL + searchParams.toString();
        return query;
    }

    /**
     * Generates a URL to get the user's saved queries.
     * @date 2024-10-30
     * @function getUserQueries
     * @param {string} userName The user name to get user queries for.
     * @returns {string} The URL to get the user's saved queries.
     */
    this.getUserQueries = (userName) => {
        var searchParams = new URLSearchParams({
            userName: userName
        });
        var query = urls.getUserQueryURL + searchParams.toString() + `&amp;dt=${Date.now()}`;
        return query;
    }

    /**
     * Generates a URL to delete a saved query from the database.
     * @date 2024-10-30
     * @function deleteUserQueries
     * @param {string} userName The user name of the saved query.
     * @param {string|number} oid The primary key of the query to delete.
     * @returns {string} The URL to delete a saved query.
     */
    this.deleteUserQueries = (userName, oid) => {
        var searchParams = new URLSearchParams({
            userName: userName,
            oid: oid
        });
        var query = urls.deleteUserQueryURL + searchParams.toString() + `&amp;dt=${Date.now()}`;
        return query;
    }

    /**
     * Generates a URL to add a saved query to the database.
     * @date 2024-10-30
     * @function addUserQueries
     * @param {object} parameters An object containing the filter parameters to save as a user query.
     * @returns {string} The URL to add a saved query to the database.
     */
    this.addUserQueries = (parameters) => {
        var searchParams = new URLSearchParams(parameters);
        var query = urls.addUserQueryURL + searchParams.toString() + `&amp;dt=${Date.now()}`;
        return query;
    }

    /**
     * Gets the top SRI and milepost locations based on highest crash count.
     * @date 2024-10-23
     * @function getTopLocations
     * @param {filters} selectedFilters An object containing query parameters.
     * @returns {object} A resolved promise containing top locations data.
     */
    this.getTopLocations = (filters) => {
        const requestPromise = self.getData(`${urls.getTopLocationsURL}`, filters);
        return requestPromise;
    }

    /**
     * Gets the attributes for a specific layer based on it's `layerName`.
     * @date 2024-10-23
     * @function getLayerAttributes
     * @param {string} layerName The name of the layer to get attributes for.
     * @returns {promise} A resolved promise containing the attributes for the layer.
     */
    this.getLayerAttributes = (layerName) => {
        const requestPromise = self.getData(`${urls.getLayerAttributesURL}/${layerName}`);
        return requestPromise;
    }
}
</code></pre>
        </article>
    </section>




    
    
</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 4.0.4</a> on Tue Dec 17 2024 10:18:34 GMT-0500 (Eastern Standard Time) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/polyfill.js"></script>
<script src="scripts/linenumber.js"></script>

<script src="scripts/search.js" defer></script>


<script src="scripts/collapse.js" defer></script>


</body>
</html>
