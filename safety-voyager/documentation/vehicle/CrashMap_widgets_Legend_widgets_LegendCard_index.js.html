<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>CrashMap/widgets/Legend/widgets/LegendCard/index.js - Documentation</title>
    
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <script src="scripts/nav.js" defer></script>
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav >
    
    <input type="text" id="nav-search" placeholder="Search" />
    
    
    <h2><a href="index.html">Home</a></h2><h2><a href="https://github.com/Greenman-Pedersen-Inc/voyager.webpack.vehicle" target="_blank" class="menu-item" id="repo_link" >Github Repository</a></h2><h3>Modules</h3><ul><li><a href="module-API.html">API</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-API.html#.getCrashSegmentsHeatmapQuery">getCrashSegmentsHeatmapQuery</a></li><li data-type='method' style='display: none;'><a href="module-API.html#.getNetworkSegmentData">getNetworkSegmentData</a></li><li data-type='method' style='display: none;'><a href="module-API.html#.getStateBreakdown">getStateBreakdown</a></li><li data-type='method' style='display: none;'><a href="module-API.html#~CreateDetailWhereClause">CreateDetailWhereClause</a></li><li data-type='method' style='display: none;'><a href="module-API.html#~CreateSearchParameters">CreateSearchParameters</a></li><li data-type='method' style='display: none;'><a href="module-API.html#~CreateWhereClause">CreateWhereClause</a></li><li data-type='method' style='display: none;'><a href="module-API.html#~GetAccidentsBySriQuery">GetAccidentsBySriQuery</a></li><li data-type='method' style='display: none;'><a href="module-API.html#~GetClusterHeatmapQuery">GetClusterHeatmapQuery</a></li><li data-type='method' style='display: none;'><a href="module-API.html#~GetCountyHeatmapQuery">GetCountyHeatmapQuery</a></li><li data-type='method' style='display: none;'><a href="module-API.html#~GetCrashDetailsQuery">GetCrashDetailsQuery</a></li><li data-type='method' style='display: none;'><a href="module-API.html#~GetCrashesQuery">GetCrashesQuery</a></li><li data-type='method' style='display: none;'><a href="module-API.html#~GetMuniHeatmapQuery">GetMuniHeatmapQuery</a></li><li data-type='method' style='display: none;'><a href="module-API.html#~GetPersonsQuery">GetPersonsQuery</a></li><li data-type='method' style='display: none;'><a href="module-API.html#~GetSriQuery">GetSriQuery</a></li><li data-type='method' style='display: none;'><a href="module-API.html#~addUserQueries">addUserQueries</a></li><li data-type='method' style='display: none;'><a href="module-API.html#~deleteUserQueries">deleteUserQueries</a></li><li data-type='method' style='display: none;'><a href="module-API.html#~errorHandler">errorHandler</a></li><li data-type='method' style='display: none;'><a href="module-API.html#~getCountyBoundaries">getCountyBoundaries</a></li><li data-type='method' style='display: none;'><a href="module-API.html#~getCountyBoundingBoxQuery">getCountyBoundingBoxQuery</a></li><li data-type='method' style='display: none;'><a href="module-API.html#~getCrash">getCrash</a></li><li data-type='method' style='display: none;'><a href="module-API.html#~getCrashDetailQuery">getCrashDetailQuery</a></li><li data-type='method' style='display: none;'><a href="module-API.html#~getCrashList">getCrashList</a></li><li data-type='method' style='display: none;'><a href="module-API.html#~getData">getData</a></li><li data-type='method' style='display: none;'><a href="module-API.html#~getExportRecords">getExportRecords</a></li><li data-type='method' style='display: none;'><a href="module-API.html#~getExportRecordsByID">getExportRecordsByID</a></li><li data-type='method' style='display: none;'><a href="module-API.html#~getFeedbackFormQuery">getFeedbackFormQuery</a></li><li data-type='method' style='display: none;'><a href="module-API.html#~getFullName">getFullName</a></li><li data-type='method' style='display: none;'><a href="module-API.html#~getGraphDataQuery">getGraphDataQuery</a></li><li data-type='method' style='display: none;'><a href="module-API.html#~getLayerAttributes">getLayerAttributes</a></li><li data-type='method' style='display: none;'><a href="module-API.html#~getMPO">getMPO</a></li><li data-type='method' style='display: none;'><a href="module-API.html#~getModules">getModules</a></li><li data-type='method' style='display: none;'><a href="module-API.html#~getMunicipalBoundingBoxQuery">getMunicipalBoundingBoxQuery</a></li><li data-type='method' style='display: none;'><a href="module-API.html#~getMunicipalityBoundaries">getMunicipalityBoundaries</a></li><li data-type='method' style='display: none;'><a href="module-API.html#~getNotifications">getNotifications</a></li><li data-type='method' style='display: none;'><a href="module-API.html#~getRouteCrashData">getRouteCrashData</a></li><li data-type='method' style='display: none;'><a href="module-API.html#~getSRIBreakdown">getSRIBreakdown</a></li><li data-type='method' style='display: none;'><a href="module-API.html#~getSRIHistogramQuery">getSRIHistogramQuery</a></li><li data-type='method' style='display: none;'><a href="module-API.html#~getSRIUnderlayQuery">getSRIUnderlayQuery</a></li><li data-type='method' style='display: none;'><a href="module-API.html#~getSessionInfo">getSessionInfo</a></li><li data-type='method' style='display: none;'><a href="module-API.html#~getTable">getTable</a></li><li data-type='method' style='display: none;'><a href="module-API.html#~getTopLocations">getTopLocations</a></li><li data-type='method' style='display: none;'><a href="module-API.html#~getUserQueries">getUserQueries</a></li><li data-type='method' style='display: none;'><a href="module-API.html#~postData">postData</a></li></ul></li><li><a href="module-AlertBox.html">AlertBox</a></li><li><a href="module-CodeTranslator.html">CodeTranslator</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-CodeTranslator.html#~convertCodeDescription">convertCodeDescription</a></li><li data-type='method' style='display: none;'><a href="module-CodeTranslator.html#~convertFeature">convertFeature</a></li><li data-type='method' style='display: none;'><a href="module-CodeTranslator.html#~convertFeatureObjectValues">convertFeatureObjectValues</a></li><li data-type='method' style='display: none;'><a href="module-CodeTranslator.html#~convertTableCodes">convertTableCodes</a></li><li data-type='method' style='display: none;'><a href="module-CodeTranslator.html#~resolveFieldAlias">resolveFieldAlias</a></li></ul></li><li><a href="module-CrashFilter.html">CrashFilter</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-CrashFilter.html#~clearSearchHighlights">clearSearchHighlights</a></li><li data-type='method' style='display: none;'><a href="module-CrashFilter.html#~getSelectedFilters">getSelectedFilters</a></li><li data-type='method' style='display: none;'><a href="module-CrashFilter.html#~getSelectedJurisdictions">getSelectedJurisdictions</a></li><li data-type='method' style='display: none;'><a href="module-CrashFilter.html#~getSignalsSelectedFilters">getSignalsSelectedFilters</a></li><li data-type='method' style='display: none;'><a href="module-CrashFilter.html#~reset">reset</a></li><li data-type='method' style='display: none;'><a href="module-CrashFilter.html#~searchFilters">searchFilters</a></li><li data-type='method' style='display: none;'><a href="module-CrashFilter.html#~setFilters">setFilters</a></li></ul></li><li><a href="module-CrashMap_widgets_CrashClusters.html">CrashMap/widgets/CrashClusters</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-CrashMap_widgets_CrashClusters.html#~addToMap">addToMap</a></li><li data-type='method' style='display: none;'><a href="module-CrashMap_widgets_CrashClusters.html#~setMinZoom">setMinZoom</a></li><li data-type='method' style='display: none;'><a href="module-CrashMap_widgets_CrashClusters.html#~update">update</a></li><li data-type='method' style='display: none;'><a href="module-CrashMap_widgets_CrashClusters.html#~updateSourceData">updateSourceData</a></li></ul></li><li><a href="module-CrashMap_widgets_CrashGrouping.html">CrashMap/widgets/CrashGrouping</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-CrashMap_widgets_CrashGrouping.html#~CrashGrouping">CrashGrouping</a></li><li data-type='method' style='display: none;'><a href="module-CrashMap_widgets_CrashGrouping.html#~addSelectValues">addSelectValues</a></li><li data-type='method' style='display: none;'><a href="module-CrashMap_widgets_CrashGrouping.html#~removePriorWindows">removePriorWindows</a></li></ul></li><li><a href="module-CrashMap_widgets_CrashGrouping_widgets_BreakdownComparator.html">CrashMap/widgets/CrashGrouping/widgets/BreakdownComparator</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-CrashMap_widgets_CrashGrouping_widgets_BreakdownComparator.html#~update">update</a></li></ul></li><li><a href="module-CrashMap_widgets_CrashGrouping_widgets_BreakdownComparator_widgets_BreakdownChart.html">CrashMap/widgets/CrashGrouping/widgets/BreakdownComparator/widgets/BreakdownChart</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-CrashMap_widgets_CrashGrouping_widgets_BreakdownComparator_widgets_BreakdownChart.html#~update">update</a></li></ul></li><li><a href="module-CrashMap_widgets_CrashRecordDialog.html">CrashMap/widgets/CrashRecordDialog</a></li><li><a href="module-CrashMap_widgets_CrashSegmentsHeatmap.html">CrashMap/widgets/CrashSegmentsHeatmap</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-CrashMap_widgets_CrashSegmentsHeatmap.html#~addToMap">addToMap</a></li><li data-type='method' style='display: none;'><a href="module-CrashMap_widgets_CrashSegmentsHeatmap.html#~clearVisuals">clearVisuals</a></li><li data-type='method' style='display: none;'><a href="module-CrashMap_widgets_CrashSegmentsHeatmap.html#~highlightFeature">highlightFeature</a></li><li data-type='method' style='display: none;'><a href="module-CrashMap_widgets_CrashSegmentsHeatmap.html#~update">update</a></li><li data-type='method' style='display: none;'><a href="module-CrashMap_widgets_CrashSegmentsHeatmap.html#~updateSourceData">updateSourceData</a></li></ul></li><li><a href="module-CrashMap_widgets_HighlightFeature.html">CrashMap/widgets/HighlightFeature</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-CrashMap_widgets_HighlightFeature.html#~clearHighlight">clearHighlight</a></li><li data-type='method' style='display: none;'><a href="module-CrashMap_widgets_HighlightFeature.html#~makePointData">makePointData</a></li></ul></li><li><a href="module-CrashMap_widgets_JursidictionBoundaries.html">CrashMap/widgets/JursidictionBoundaries</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-CrashMap_widgets_JursidictionBoundaries.html#~addToMap">addToMap</a></li><li data-type='method' style='display: none;'><a href="module-CrashMap_widgets_JursidictionBoundaries.html#~update">update</a></li></ul></li><li><a href="module-CrashMap_widgets_Legend.html">CrashMap/widgets/Legend</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-CrashMap_widgets_Legend.html#~addLayerGroup">addLayerGroup</a></li><li data-type='method' style='display: none;'><a href="module-CrashMap_widgets_Legend.html#~checkXPosition">checkXPosition</a></li><li data-type='method' style='display: none;'><a href="module-CrashMap_widgets_Legend.html#~checkYPosition">checkYPosition</a></li><li data-type='method' style='display: none;'><a href="module-CrashMap_widgets_Legend.html#~clear">clear</a></li><li data-type='method' style='display: none;'><a href="module-CrashMap_widgets_Legend.html#~getPosition">getPosition</a></li><li data-type='method' style='display: none;'><a href="module-CrashMap_widgets_Legend.html#~hide">hide</a></li><li data-type='method' style='display: none;'><a href="module-CrashMap_widgets_Legend.html#~resetYPosition">resetYPosition</a></li><li data-type='method' style='display: none;'><a href="module-CrashMap_widgets_Legend.html#~show">show</a></li><li data-type='method' style='display: none;'><a href="module-CrashMap_widgets_Legend.html#~update">update</a></li></ul></li><li><a href="module-CrashMap_widgets_LegendCard.html">CrashMap/widgets/LegendCard</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-CrashMap_widgets_LegendCard.html#~populateCardEntries">populateCardEntries</a></li><li data-type='method' style='display: none;'><a href="module-CrashMap_widgets_LegendCard.html#~update">update</a></li><li data-type='method' style='display: none;'><a href="module-CrashMap_widgets_LegendCard.html#~updateVisibility">updateVisibility</a></li></ul></li><li><a href="module-CrashMap_widgets_LegendCardGroup.html">CrashMap/widgets/LegendCardGroup</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-CrashMap_widgets_LegendCardGroup.html#~createLegendScheme">createLegendScheme</a></li><li data-type='method' style='display: none;'><a href="module-CrashMap_widgets_LegendCardGroup.html#~updateVisibility">updateVisibility</a></li></ul></li><li><a href="module-CrashMap_widgets_MapSources.html">CrashMap/widgets/MapSources</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-CrashMap_widgets_MapSources.html#~getHighlightLayerSource">getHighlightLayerSource</a></li><li data-type='method' style='display: none;'><a href="module-CrashMap_widgets_MapSources.html#~getHighlightLayerSource">getHighlightLayerSource</a></li><li data-type='method' style='display: none;'><a href="module-CrashMap_widgets_MapSources.html#~getLayerGroupData">getLayerGroupData</a></li><li data-type='method' style='display: none;'><a href="module-CrashMap_widgets_MapSources.html#~getMapLayerData">getMapLayerData</a></li><li data-type='method' style='display: none;'><a href="module-CrashMap_widgets_MapSources.html#~getOverlayLayerDefinitions">getOverlayLayerDefinitions</a></li></ul></li><li><a href="module-CrashMap_widgets_Screenshot.html">CrashMap/widgets/Screenshot</a></li><li><a href="module-FeedbackForm.html">FeedbackForm</a></li><li><a href="module-FilterMenu.html">FilterMenu</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-FilterMenu.html#~clearCheckBoxSpinners">clearCheckBoxSpinners</a></li><li data-type='method' style='display: none;'><a href="module-FilterMenu.html#~hide">hide</a></li><li data-type='method' style='display: none;'><a href="module-FilterMenu.html#~isLoading">isLoading</a></li><li data-type='method' style='display: none;'><a href="module-FilterMenu.html#~show">show</a></li></ul></li><li><a href="module-FilterMenu_widgets_CheckboxFilter.html">FilterMenu/widgets/CheckboxFilter</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-FilterMenu_widgets_CheckboxFilter.html#~checkFilterField">checkFilterField</a></li><li data-type='method' style='display: none;'><a href="module-FilterMenu_widgets_CheckboxFilter.html#~clearTable">clearTable</a></li><li data-type='method' style='display: none;'><a href="module-FilterMenu_widgets_CheckboxFilter.html#~getDescriptionSelections">getDescriptionSelections</a></li><li data-type='method' style='display: none;'><a href="module-FilterMenu_widgets_CheckboxFilter.html#~getSelections">getSelections</a></li><li data-type='method' style='display: none;'><a href="module-FilterMenu_widgets_CheckboxFilter.html#~reset">reset</a></li><li data-type='method' style='display: none;'><a href="module-FilterMenu_widgets_CheckboxFilter.html#~selectEntireTable">selectEntireTable</a></li></ul></li><li><a href="module-FilterMenu_widgets_CheckboxFilter_widgets_CheckBoxRow.html">FilterMenu/widgets/CheckboxFilter/widgets/CheckBoxRow</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-FilterMenu_widgets_CheckboxFilter_widgets_CheckBoxRow.html#~check">check</a></li><li data-type='method' style='display: none;'><a href="module-FilterMenu_widgets_CheckboxFilter_widgets_CheckBoxRow.html#~disable">disable</a></li><li data-type='method' style='display: none;'><a href="module-FilterMenu_widgets_CheckboxFilter_widgets_CheckBoxRow.html#~uncheck">uncheck</a></li></ul></li><li><a href="module-FilterMenu_widgets_DateSelector.html">FilterMenu/widgets/DateSelector</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-FilterMenu_widgets_DateSelector.html#~checkFilterField">checkFilterField</a></li><li data-type='method' style='display: none;'><a href="module-FilterMenu_widgets_DateSelector.html#~getDescriptionSelections">getDescriptionSelections</a></li><li data-type='method' style='display: none;'><a href="module-FilterMenu_widgets_DateSelector.html#~getSelections">getSelections</a></li><li data-type='method' style='display: none;'><a href="module-FilterMenu_widgets_DateSelector.html#~hide">hide</a></li><li data-type='method' style='display: none;'><a href="module-FilterMenu_widgets_DateSelector.html#~reset">reset</a></li><li data-type='method' style='display: none;'><a href="module-FilterMenu_widgets_DateSelector.html#~show">show</a></li></ul></li><li><a href="module-FilterMenu_widgets_DateSelector_widgets_ApplyChangesSelector.html">FilterMenu/widgets/DateSelector/widgets/ApplyChangesSelector</a></li><li><a href="module-FilterMenu_widgets_DateSelector_widgets_DateRangeSelector.html">FilterMenu/widgets/DateSelector/widgets/DateRangeSelector</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-FilterMenu_widgets_DateSelector_widgets_DateRangeSelector.html#~checkFilterField">checkFilterField</a></li><li data-type='method' style='display: none;'><a href="module-FilterMenu_widgets_DateSelector_widgets_DateRangeSelector.html#~clearDateRangeSelection">clearDateRangeSelection</a></li><li data-type='method' style='display: none;'><a href="module-FilterMenu_widgets_DateSelector_widgets_DateRangeSelector.html#~getSelections">getSelections</a></li><li data-type='method' style='display: none;'><a href="module-FilterMenu_widgets_DateSelector_widgets_DateRangeSelector.html#~returnRange">returnRange</a></li></ul></li><li><a href="module-FilterMenu_widgets_DateSelector_widgets_MonthSelector.html">FilterMenu/widgets/DateSelector/widgets/MonthSelector</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-FilterMenu_widgets_DateSelector_widgets_MonthSelector.html#~checkFilterField">checkFilterField</a></li><li data-type='method' style='display: none;'><a href="module-FilterMenu_widgets_DateSelector_widgets_MonthSelector.html#~clearMonthSelection">clearMonthSelection</a></li><li data-type='method' style='display: none;'><a href="module-FilterMenu_widgets_DateSelector_widgets_MonthSelector.html#~getDescriptionSelections">getDescriptionSelections</a></li><li data-type='method' style='display: none;'><a href="module-FilterMenu_widgets_DateSelector_widgets_MonthSelector.html#~getSelections">getSelections</a></li><li data-type='method' style='display: none;'><a href="module-FilterMenu_widgets_DateSelector_widgets_MonthSelector.html#~highlightMonthsByValues">highlightMonthsByValues</a></li><li data-type='method' style='display: none;'><a href="module-FilterMenu_widgets_DateSelector_widgets_MonthSelector.html#~setFilter">setFilter</a></li></ul></li><li><a href="module-FilterMenu_widgets_DateSelector_widgets_YearSelector.html">FilterMenu/widgets/DateSelector/widgets/YearSelector</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-FilterMenu_widgets_DateSelector_widgets_YearSelector.html#~checkFilterField">checkFilterField</a></li><li data-type='method' style='display: none;'><a href="module-FilterMenu_widgets_DateSelector_widgets_YearSelector.html#~clearYearSelection">clearYearSelection</a></li><li data-type='method' style='display: none;'><a href="module-FilterMenu_widgets_DateSelector_widgets_YearSelector.html#~getDescriptionSelections">getDescriptionSelections</a></li><li data-type='method' style='display: none;'><a href="module-FilterMenu_widgets_DateSelector_widgets_YearSelector.html#~getSelections">getSelections</a></li><li data-type='method' style='display: none;'><a href="module-FilterMenu_widgets_DateSelector_widgets_YearSelector.html#~highlightYearsByValues">highlightYearsByValues</a></li><li data-type='method' style='display: none;'><a href="module-FilterMenu_widgets_DateSelector_widgets_YearSelector.html#~setFilter">setFilter</a></li></ul></li><li><a href="module-FilterMenu_widgets_LocationFilter_widgets_ApplyChangesSelector.html">FilterMenu/widgets/LocationFilter/widgets/ApplyChangesSelector</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-FilterMenu_widgets_LocationFilter_widgets_ApplyChangesSelector.html#~error">error</a></li></ul></li><li><a href="module-FilterMenu_widgets_LocationFilter_widgets_RadioBoxRow.html">FilterMenu/widgets/LocationFilter/widgets/RadioBoxRow</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-FilterMenu_widgets_LocationFilter_widgets_RadioBoxRow.html#~reset">reset</a></li></ul></li><li><a href="module-FilterMenu_widgets_MultivehicleFilter.html">FilterMenu/widgets/MultivehicleFilter</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-FilterMenu_widgets_MultivehicleFilter.html#~checkFilterField">checkFilterField</a></li><li data-type='method' style='display: none;'><a href="module-FilterMenu_widgets_MultivehicleFilter.html#~getDescriptionSelections">getDescriptionSelections</a></li><li data-type='method' style='display: none;'><a href="module-FilterMenu_widgets_MultivehicleFilter.html#~getSelections">getSelections</a></li><li data-type='method' style='display: none;'><a href="module-FilterMenu_widgets_MultivehicleFilter.html#~hide">hide</a></li><li data-type='method' style='display: none;'><a href="module-FilterMenu_widgets_MultivehicleFilter.html#~reset">reset</a></li><li data-type='method' style='display: none;'><a href="module-FilterMenu_widgets_MultivehicleFilter.html#~show">show</a></li></ul></li><li><a href="module-FilterMenu_widgets_MultivehicleFilter_widgets_ApplyChangesSelector.html">FilterMenu/widgets/MultivehicleFilter/widgets/ApplyChangesSelector</a></li><li><a href="module-FilterMenu_widgets_MultivehicleFilter_widgets_SelectDropDown.html">FilterMenu/widgets/MultivehicleFilter/widgets/SelectDropDown</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-FilterMenu_widgets_MultivehicleFilter_widgets_SelectDropDown.html#~disable">disable</a></li><li data-type='method' style='display: none;'><a href="module-FilterMenu_widgets_MultivehicleFilter_widgets_SelectDropDown.html#~enable">enable</a></li><li data-type='method' style='display: none;'><a href="module-FilterMenu_widgets_MultivehicleFilter_widgets_SelectDropDown.html#~reset">reset</a></li><li data-type='method' style='display: none;'><a href="module-FilterMenu_widgets_MultivehicleFilter_widgets_SelectDropDown.html#~update">update</a></li></ul></li><li><a href="module-FilterSearch.html">FilterSearch</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-FilterSearch.html#~clear">clear</a></li><li data-type='method' style='display: none;'><a href="module-FilterSearch.html#~clearSearchHighlights">clearSearchHighlights</a></li></ul></li><li><a href="module-HomeButton.html">HomeButton</a></li><li><a href="module-Modal.html">Modal</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-Modal.html#~errorHandler">errorHandler</a></li><li data-type='method' style='display: none;'><a href="module-Modal.html#~evaluateZoomVisibility">evaluateZoomVisibility</a></li><li data-type='method' style='display: none;'><a href="module-Modal.html#~remove">remove</a></li><li data-type='method' style='display: none;'><a href="module-Modal.html#~show">show</a></li></ul></li><li></li><li><a href="module-MoveablePopup.html">MoveablePopup</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-MoveablePopup.html#~checkXPosition">checkXPosition</a></li><li data-type='method' style='display: none;'><a href="module-MoveablePopup.html#~checkYPosition">checkYPosition</a></li></ul></li><li><a href="module-OmniSearch.html">OmniSearch</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-OmniSearch.html#~fireCustomQuery">fireCustomQuery</a></li><li data-type='method' style='display: none;'><a href="module-OmniSearch.html#~fireCustomQuery">fireCustomQuery</a></li><li data-type='method' style='display: none;'><a href="module-OmniSearch.html#~hide">hide</a></li><li data-type='method' style='display: none;'><a href="module-OmniSearch.html#~isSearchFilterButtonToggled">isSearchFilterButtonToggled</a></li></ul></li><li><a href="module-OmniSearch_widgets_OmniResult.html">OmniSearch/widgets/OmniResult</a></li><li><a href="module-OmniSearch_widgets_SearchFilterButton.html">OmniSearch/widgets/SearchFilterButton</a></li><li><a href="module-Popup.html">Popup</a></li><li><a href="module-Popup_widgets_PopupGrid.html">Popup/widgets/PopupGrid</a></li><li><a href="module-RadioBoxTable.html">RadioBoxTable</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-RadioBoxTable.html#~reset">reset</a></li><li data-type='method' style='display: none;'><a href="module-RadioBoxTable.html#~update">update</a></li><li data-type='method' style='display: none;'><a href="module-RadioBoxTable.html#~updateSelection">updateSelection</a></li></ul></li><li><a href="module-ResultsPane.html">ResultsPane</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-ResultsPane.html#~resizeResultsTable">resizeResultsTable</a></li></ul></li><li><a href="module-ResultsPane_widgets_AreaTemporalMetrics_widgets_ChartOptions.html">ResultsPane/widgets/AreaTemporalMetrics/widgets/ChartOptions</a></li><li><a href="module-ResultsPane_widgets_AreaTemporalMetrics_widgets_ChartTabs.html">ResultsPane/widgets/AreaTemporalMetrics/widgets/ChartTabs</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-ResultsPane_widgets_AreaTemporalMetrics_widgets_ChartTabs.html#~getGraphData">getGraphData</a></li><li data-type='method' style='display: none;'><a href="module-ResultsPane_widgets_AreaTemporalMetrics_widgets_ChartTabs.html#~initiateChart">initiateChart</a></li><li data-type='method' style='display: none;'><a href="module-ResultsPane_widgets_AreaTemporalMetrics_widgets_ChartTabs.html#~updateCharts">updateCharts</a></li></ul></li><li><a href="module-ResultsPane_widgets_AreaTemporalMetrics_widgets_SpeedChart.html">ResultsPane/widgets/AreaTemporalMetrics/widgets/SpeedChart</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-ResultsPane_widgets_AreaTemporalMetrics_widgets_SpeedChart.html#~createChart">createChart</a></li><li data-type='method' style='display: none;'><a href="module-ResultsPane_widgets_AreaTemporalMetrics_widgets_SpeedChart.html#~prepData">prepData</a></li><li data-type='method' style='display: none;'><a href="module-ResultsPane_widgets_AreaTemporalMetrics_widgets_SpeedChart.html#~update">update</a></li></ul></li><li><a href="module-ResultsPane_widgets_AreaTemporalMetrics_widgets_TemporalChart.html">ResultsPane/widgets/AreaTemporalMetrics/widgets/TemporalChart</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-ResultsPane_widgets_AreaTemporalMetrics_widgets_TemporalChart.html#~createChart">createChart</a></li><li data-type='method' style='display: none;'><a href="module-ResultsPane_widgets_AreaTemporalMetrics_widgets_TemporalChart.html#~prepData">prepData</a></li><li data-type='method' style='display: none;'><a href="module-ResultsPane_widgets_AreaTemporalMetrics_widgets_TemporalChart.html#~update">update</a></li></ul></li><li><a href="module-ResultsPane_widgets_ExportCSV.html">ResultsPane/widgets/ExportCSV</a></li><li><a href="module-ResultsPane_widgets_ExportCrashRecords.html">ResultsPane/widgets/ExportCrashRecords</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-ResultsPane_widgets_ExportCrashRecords.html#~enableSpinner">enableSpinner</a></li><li data-type='method' style='display: none;'><a href="module-ResultsPane_widgets_ExportCrashRecords.html#~exportRecords">exportRecords</a></li></ul></li><li><a href="module-ResultsPane_widgets_FilterSummary.html">ResultsPane/widgets/FilterSummary</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-ResultsPane_widgets_FilterSummary.html#~formatYearFilter">formatYearFilter</a></li><li data-type='method' style='display: none;'><a href="module-ResultsPane_widgets_FilterSummary.html#~removeLabels">removeLabels</a></li><li data-type='method' style='display: none;'><a href="module-ResultsPane_widgets_FilterSummary.html#~update">update</a></li></ul></li><li><a href="module-ResultsPane_widgets_ResultsGrid.html">ResultsPane/widgets/ResultsGrid</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-ResultsPane_widgets_ResultsGrid.html#~compare_cty_code">compare_cty_code</a></li><li data-type='method' style='display: none;'><a href="module-ResultsPane_widgets_ResultsGrid.html#~compare_muni_code">compare_muni_code</a></li><li data-type='method' style='display: none;'><a href="module-ResultsPane_widgets_ResultsGrid.html#~exportCsv">exportCsv</a></li><li data-type='method' style='display: none;'><a href="module-ResultsPane_widgets_ResultsGrid.html#~hide">hide</a></li><li data-type='method' style='display: none;'><a href="module-ResultsPane_widgets_ResultsGrid.html#~removeDuplicateObjects">removeDuplicateObjects</a></li><li data-type='method' style='display: none;'><a href="module-ResultsPane_widgets_ResultsGrid.html#~removeHighlight">removeHighlight</a></li><li data-type='method' style='display: none;'><a href="module-ResultsPane_widgets_ResultsGrid.html#~resize">resize</a></li><li data-type='method' style='display: none;'><a href="module-ResultsPane_widgets_ResultsGrid.html#~show">show</a></li><li data-type='method' style='display: none;'><a href="module-ResultsPane_widgets_ResultsGrid.html#~update">update</a></li></ul></li><li><a href="module-SettingsMenu.html">SettingsMenu</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-SettingsMenu.html#~disableClusterToggleButton">disableClusterToggleButton</a></li><li data-type='method' style='display: none;'><a href="module-SettingsMenu.html#~hide">hide</a></li><li data-type='method' style='display: none;'><a href="module-SettingsMenu.html#~show">show</a></li><li data-type='method' style='display: none;'><a href="module-SettingsMenu.html#~startTour">startTour</a></li></ul></li><li><a href="module-SettingsMenu_widgets_BasemapToggle.html">SettingsMenu/widgets/BasemapToggle</a></li><li><a href="module-SettingsMenu_widgets_ClusterToggle.html">SettingsMenu/widgets/ClusterToggle</a></li><li><a href="module-SettingsMenu_widgets_CrashClusterSelect.html">SettingsMenu/widgets/CrashClusterSelect</a></li><li><a href="module-SettingsMenu_widgets_MenuAnnotationToggle.html">SettingsMenu/widgets/MenuAnnotationToggle</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-SettingsMenu_widgets_MenuAnnotationToggle.html#~setAnnotationMode">setAnnotationMode</a></li></ul></li><li><a href="module-SettingsMenu_widgets_SignalsTourToggle_widgets_WelcomeTour.html">SettingsMenu/widgets/SignalsTourToggle/widgets/WelcomeTour</a></li><li><a href="module-SettingsMenu_widgets_TourToggle.html">SettingsMenu/widgets/TourToggle</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-SettingsMenu_widgets_TourToggle.html#~mouseEnterHandler">mouseEnterHandler</a></li><li data-type='method' style='display: none;'><a href="module-SettingsMenu_widgets_TourToggle.html#~mouseLeaveHandler">mouseLeaveHandler</a></li></ul></li><li><a href="module-SettingsMenu_widgets_UserManual.html">SettingsMenu/widgets/UserManual</a></li><li><a href="module-StatsExplorer.html">StatsExplorer</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-StatsExplorer.html#~clear">clear</a></li><li data-type='method' style='display: none;'><a href="module-StatsExplorer.html#~clearChart">clearChart</a></li><li data-type='method' style='display: none;'><a href="module-StatsExplorer.html#~clearVehicleChartDivs">clearVehicleChartDivs</a></li><li data-type='method' style='display: none;'><a href="module-StatsExplorer.html#~createChart">createChart</a></li><li data-type='method' style='display: none;'><a href="module-StatsExplorer.html#~createPersonsSeverityChart">createPersonsSeverityChart</a></li><li data-type='method' style='display: none;'><a href="module-StatsExplorer.html#~createSelect">createSelect</a></li><li data-type='method' style='display: none;'><a href="module-StatsExplorer.html#~createVehicleModelChart">createVehicleModelChart</a></li><li data-type='method' style='display: none;'><a href="module-StatsExplorer.html#~createVehiclesAttributeChart">createVehiclesAttributeChart</a></li><li data-type='method' style='display: none;'><a href="module-StatsExplorer.html#~generateVehicleChartDivs">generateVehicleChartDivs</a></li><li data-type='method' style='display: none;'><a href="module-StatsExplorer.html#~init">init</a></li><li data-type='method' style='display: none;'><a href="module-StatsExplorer.html#~loading">loading</a></li><li data-type='method' style='display: none;'><a href="module-StatsExplorer.html#~loadingDiv">loadingDiv</a></li><li data-type='method' style='display: none;'><a href="module-StatsExplorer.html#~update">update</a></li><li data-type='method' style='display: none;'><a href="module-StatsExplorer.html#~updateSeverityChart">updateSeverityChart</a></li><li data-type='method' style='display: none;'><a href="module-StatsExplorer.html#~updateStatsChart">updateStatsChart</a></li><li data-type='method' style='display: none;'><a href="module-StatsExplorer.html#~updateVehicleMakeChart">updateVehicleMakeChart</a></li></ul></li><li><a href="module-StatsPane.html">StatsPane</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-StatsPane.html#~checkOpen">checkOpen</a></li><li data-type='method' style='display: none;'><a href="module-StatsPane.html#~init">init</a></li><li data-type='method' style='display: none;'><a href="module-StatsPane.html#~togglePane">togglePane</a></li><li data-type='method' style='display: none;'><a href="module-StatsPane.html#~update">update</a></li></ul></li><li><a href="module-Utilities.html">Utilities</a></li><li><a href="module-urls.html">urls</a></li></ul>
    
</nav>

<div id="main">
    
    <h1 class="page-title">CrashMap/widgets/Legend/widgets/LegendCard/index.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * Creates the color schema for data in the layer.
 * @date 2024-10-25
 * @function createLegendScheme
 * @param {object[]} features An array of objects containing crash data. Each data point should contain the attribute `properties.crashes`.
 * @param {object} layerDefinition An object containing attributes of the target layer.
 * @returns {object[]} An array of objects containing the color ramp to visualize the inputted `features`.
 */
function createLegendScheme(features, layerDefinition) {
    var colorRange = [];

    function minMax(someArrayOfObjects) {
        if (someArrayOfObjects) {
            if (someArrayOfObjects.length == 0) {
                return {
                    max: 0,
                    min: 0,
                };
            }
            const values = someArrayOfObjects.map((item) => item['properties']['crash_count'] || item['properties']['point_count'] || 1);

            return {
                max: Math.max.apply(null, values),
                min: Math.min.apply(null, values),
            };
        } else {
            return {
                max: 0,
                min: 0,
            };
        }
    }

    function assignColorRamp(minMaxCrashes, unclusteredCrashes = false) {
        let colorArray = ['#a1dbb2', '#fee5ad', '#faca66', '#f7a541', '#f45d4c'];
        let generatedRange = [];
        let min = minMaxCrashes.min;
        let max = minMaxCrashes.max;
        let difference = max - min;
        let bucketSize = Math.floor(difference / colorArray.length);

        if (unclusteredCrashes) {
            generatedRange.push({
                from: 1,
                to: 1,
                color: colorArray.shift(),
                clustered: false,
                label: '1 (Unclustered Point)',
            });
            min += 1;
        }

        if (difference >= colorArray.length) {
            for (var i = 0; i &lt; colorArray.length; i++) {
                if (i == colorArray.length - 1) {
                    generatedRange.push({
                        from: min,
                        to: max,
                        color: colorArray[i],
                        clustered: true,
                    });
                } else {
                    generatedRange.push({
                        from: min,
                        to: min + bucketSize - 1,
                        color: colorArray[i],
                        clustered: true,
                    });
                    min = min + bucketSize;
                }
            }
        } else if (min === 1 &amp;&amp; max === 1) {
            generatedRange.push({
                from: 1,
                to: 1,
                color: colorArray.shift(),
                clustered: false,
                label: '1 (Unclustered Point)',
            });
        } else if (min === max) {
            generatedRange.push({
                from: min,
                to: max,
                color: colorArray[colorArray.length - 1],
                clustered: false,
                label: min.toString(),
            });
        } else if (bucketSize === 0) {
            for (var i = 0; i &lt;= max; i++) {
                generatedRange.push({
                    from: i + min,
                    to: i + min,
                    color: colorArray[i],
                    clustered: true,
                });
            }
        } else {
            for (var i = 0; i &lt; difference; i++) {
                generatedRange.push({
                    from: i + min,
                    to: i + min,
                    color: colorArray[i],
                    clustered: true,
                });
            }
        }

        return generatedRange;
    }

    if (features.length > 0) {
        let minMaxCrashes = minMax(features);

        if (minMaxCrashes.min &amp;&amp; minMaxCrashes.max) {
            if (minMaxCrashes.min === 0) {
                console.error('cluster with no crashes returned!', features);
            } else if (minMaxCrashes.min === 1) {
                // there are unclustered points on the map
                if (minMaxCrashes.max === 1) {
                    // only unclusterd points returned
                    // console.log('only unclusterd points returned')
                    colorRange = assignColorRamp(minMaxCrashes, layerDefinition.id === 'clusters' ? true : false);
                } else {
                    colorRange = assignColorRamp(minMaxCrashes, layerDefinition.id === 'clusters' ? true : false);
                }
            } else {
                // all points returned are clustered
                // console.log('all points returned are clustered')
                colorRange = assignColorRamp(minMaxCrashes);
            }
        } else {
            console.error('the bounds are not returning correctly', minMaxCrashes);
        }
    }

    return colorRange;
}

/**
 * Evaluates the visibility of an element based on the current zoom level and specified minimum and maximum zoom constraints.
 *
 * @function evaluateZoomVisibility
 * @date 2024-11-20
 * @param {number} zoomLevel - The current zoom level to evaluate.
 * @param {number} minzoom - The minimum zoom level for visibility (optional).
 * @param {number} maxzoom - The maximum zoom level for visibility (optional).
 * @returns {boolean} `true` if the zoom level is within the specified range or if no constraints are provided, otherwise `false`.
 */
function evaluateZoomVisibility(zoomLevel, minzoom, maxzoom) {
    if (minzoom &amp;&amp; maxzoom) {
        if (zoomLevel >= minzoom &amp;&amp; zoomLevel &lt;= maxzoom) {
            return true;
        } else {
            return false;
        }
    } else if (minzoom) {
        if (zoomLevel >= minzoom) {
            return true;
        } else {
            return false;
        }
    } else if (maxzoom) {
        if (zoomLevel &lt;= maxzoom) {
            return true;
        } else {
            return false;
        }
    } else {
        return true;
    }
}

/**
 * Adds a layer to the legend widget. Layers have numeric data like crash count where numbers can update from the user's map navigation.
 * @date 2024-11-13
 * @module CrashMap/widgets/LegendCard
 * @param {module} legend The legend widget.
 * @param {string} parentID The ID of the div or DOM node of the legend accordian where the legend card will be appended to.
 * @param {function} map The Mapbox map.
 * @param {any} layerDefinition An object containing attributes of the target layer.
 * @param {any} features=[] An array of objects containing crash data. Each data point should contain the attribute `properties.crashes`.
 * @param {boolean} visible=false If true, displays the legend group in the legend widget. If false, hides the legend group in the legend widget.
 * @param {boolean} collapsed=false If true, collapses the legend group's contents. If false, displays the legend group's contents.
 * @requires ../../../../../Utilities
 */
export default function LegendCard(legend, parentID, map, layerDefinition, features = [], visible = true) {
    const self = this;

    let legendScheme = createLegendScheme(features, layerDefinition);

    /**
     * Creates and returns a DOM node containing the legend color schema items to render in the map UI.
     * @date 2024-11-13
     * @function populateCardEntries
     * @param {object[]} legendSchemeToApply An array of objects where each object contains a line in the legend schema with a "from", "to", label, and color value.
     * @returns {domNode} A DOM node containing the legend color schema items to render in the map UI.
     */
    function populateCardEntries(legendSchemeToApply) {
        let legendEntries = document.createDocumentFragment();

        legendSchemeToApply
            .sort(function (a, b) {
                return b.from - a.from;
            })
            .forEach((item, index) => {
                let symbol;
                let svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
                let itemDiv = document.createElement('div');
                let descriptionSpan = document.createElement('span');

                const shadeFactor = 0.4;
                const rgbValues = item.color.replace(/[^\d,]/g, '').split(',');
                const newR = parseInt(rgbValues[0]) * (1 - shadeFactor);
                const newG = parseInt(rgbValues[1]) * (1 - shadeFactor);
                const newB = parseInt(rgbValues[2]) * (1 - shadeFactor);
                const newRGBValues = `rgb(${newR},${newG},${newB})`;

                itemDiv.style = 'display: flex; align-items: center; padding: 0.0625em 0;';

                svg.setAttribute('height', '21');
                svg.setAttribute('width', '21');
                svg.style = 'margin-right: 0.75em;';

                descriptionSpan.classList.add('description-span');

                if (layerDefinition.type === 'fill') {
                    symbol = document.createElementNS('http://www.w3.org/2000/svg', 'rect');
                    symbol.setAttribute('x', '0.5');
                    symbol.setAttribute('y', '0.5');
                    symbol.setAttribute('height', '20');
                    symbol.setAttribute('width', '20');
                    symbol.setAttribute('fill', item.color);
                    symbol.setAttribute('stroke', newRGBValues);
                    symbol.setAttribute('stroke-width', '1');
                } else if (layerDefinition.type === 'fill-extrusion') {
                    svg.setAttribute('width', `${21 + 20 * legendSchemeToApply.length}`);
                    symbol = document.createElementNS('http://www.w3.org/2000/svg', 'rect');
                    symbol.setAttribute('x', '0.5');
                    symbol.setAttribute('y', '0.5');
                    symbol.setAttribute('height', '20');
                    symbol.setAttribute('width', `${20 + 20 * (legendSchemeToApply.length - index)}`);
                    symbol.setAttribute('fill', item.color);
                    symbol.setAttribute('stroke', newRGBValues);
                    symbol.setAttribute('stroke-width', '0.5');
                } else if (layerDefinition.type === 'line') {
                    symbol = document.createElementNS('http://www.w3.org/2000/svg', 'path');
                    symbol.setAttribute('d', 'M 0 0 L 6 15 L 13 6 L 20 20');

                    function hexToRGBA(hex, opacity) {
                        return (
                            'rgba(' +
                            (hex = hex.replace('#', ''))
                                .match(new RegExp('(.{' + hex.length / 3 + '})', 'g'))
                                .map(function (l) {
                                    return parseInt(hex.length % 2 ? l + l : l, 16);
                                })
                                .concat(isFinite(opacity) ? opacity : 1)
                                .join(',') +
                            ')'
                        );
                    }

                    symbol.setAttribute('stroke', hexToRGBA(item.color));
                    symbol.setAttribute('stroke-width', '3');
                    symbol.setAttribute('fill', 'none');
                } else {
                    symbol = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
                    symbol.setAttribute('cx', 10);
                    symbol.setAttribute('cy', 10);
                    symbol.setAttribute('r', 9);
                    symbol.setAttribute('fill', item.color);
                    symbol.setAttribute('stroke', newRGBValues);
                    symbol.setAttribute('stroke-width', '1');
                }

                svg.appendChild(symbol);

                if (item.label &amp;&amp; layerDefinition.id === 'clusters') {
                    descriptionSpan.innerHTML = item.label;
                } else if (item.from === item.to) {
                    if (item.maxValue) {
                        descriptionSpan.innerHTML = item.from.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ',') + '+';
                    } else {
                        descriptionSpan.innerHTML = item.from.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ',');
                    }
                } else {
                    descriptionSpan.innerHTML = `${item.from.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ',')} - ${item.to.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ',')}`;
                }

                itemDiv.append(svg, descriptionSpan);
                legendEntries.appendChild(itemDiv);
            });

        if (layerDefinition.type === 'fill-extrusion') {
            let symbol;
            let svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
            let itemDiv = document.createElement('div');
            let descriptionSpan = document.createElement('span');

            itemDiv.style = 'display: flex; align-items: center; padding: 0.0625em 0;';

            svg.setAttribute('height', '21');
            svg.setAttribute('width', `${21 + 20 * legendSchemeToApply.length}`);
            svg.style = 'margin-right: 0.75em;';

            descriptionSpan.classList.add('description-span');
            descriptionSpan.innerHTML = 'Unmatched (no MP recorded)';

            symbol = document.createElementNS('http://www.w3.org/2000/svg', 'rect');
            symbol.setAttribute('x', '0.5');
            symbol.setAttribute('y', '0.5');
            symbol.setAttribute('height', '20');
            symbol.setAttribute('width', '20');
            symbol.setAttribute('fill', 'rgb(211, 211, 211)');
            symbol.setAttribute('stroke', 'rgb(126.6, 126.6, 126.6)');
            symbol.setAttribute('stroke-width', '1');

            svg.appendChild(symbol);

            itemDiv.append(svg, descriptionSpan);
            legendEntries.appendChild(itemDiv);
        }

        legendSchemeToApply.sort(function (a, b) {
            return a.from - b.from;
        });

        return legendEntries;
    }

    this.id = layerDefinition.id;
    this.minzoom = layerDefinition.minzoom ? layerDefinition.minzoom : null;
    this.maxzoom = layerDefinition.maxzoom ? layerDefinition.maxzoom : null;
    this.content = document.createElement('div');
    this.loadingIndicator = document.createElement('span');
    this.loadingIndicator.className = 'loading';

    /**
     * Updates the legend card color schma and data values.
     * @date 2024-11-13
     * @function update
     * @param {object[]} colorRamp An array of objects where each object contains a line in the legend schema with a "from", "to", label, and color value.
     * @returns {object[]} An array of objects where each object contains a line in the legend schema with a "from", "to", label, and color value.
     */
    this.update = function (colorRamp) {
        let contentContainer = self.content.querySelector('.accordion-body');

        while (contentContainer.lastChild) {
            contentContainer.removeChild(contentContainer.lastChild);
        }

        if (colorRamp.length > 0) {
            contentContainer.appendChild(populateCardEntries(colorRamp));
        } else {
            let emptyDataSetMessage = document.createElement('div');

            emptyDataSetMessage.innerHTML = 'No data returned';
            contentContainer.appendChild(emptyDataSetMessage);
        }

        if (layerDefinition.explanation) {
            let explanationBlock = document.createElement('div');
            explanationBlock.id = layerDefinition.explanation.id;
            explanationBlock.className = layerDefinition.explanation.className;
            legendCollapseContent.prepend(explanationBlock);
        }

        return colorRamp;
    };

    /**
     * Updates a legend card's visibility by hiding or showing it in the legend widget.
     * @date 2024-11-13
     * @function updateVisibility
     */
    this.updateVisibility = function () {
        let layer = map.getLayer(self.id);

        if (layer) {
            if (layer.disabled) {
                self.content.classList.add('hidden');
            } else {
                if (evaluateZoomVisibility(map.getZoom(), layer.minzoom, layer.maxzoom)) {
                    self.content.classList.remove('hidden');

                    if (self.legendCardHeaderCheckbox.checked) {
                        map.setLayoutProperty(layer.id, 'visibility', 'visible');
                        if (layerDefinition.relatedLayers) {
                            layerDefinition.relatedLayers.forEach((relatedLayer) => {
                                map.setLayoutProperty(relatedLayer, 'visibility', 'visible');
                            });
                        }
                        self.legendCardHeaderToggle.classList.remove('collapsed');

                        legendCollapse.classList.remove('hidden');
                        legendCollapse.classList.add('show');
                    } else {
                        map.setLayoutProperty(layer.id, 'visibility', 'none');
                        if (layerDefinition.relatedLayers) {
                            layerDefinition.relatedLayers.forEach((relatedLayer) => {
                                map.setLayoutProperty(relatedLayer, 'visibility', 'none');
                            });
                        }
                        legendCollapse.classList.add('hidden');
                        self.legendCardHeaderToggle.classList.add('collapsed');
                    }
                } else {
                    self.content.classList.add('hidden');
                }
            }
        }
    };

    this.content.classList.add('accordion-item');

    let legendCardHeader = document.createElement('h2');
    legendCardHeader.id = `card-header-${layerDefinition.id}`;
    legendCardHeader.className = 'accordion-header';

    this.legendCardHeaderCheckbox = document.createElement('input');
    this.legendCardHeaderCheckbox.className = 'form-check-input my-2';
    this.legendCardHeaderCheckbox.type = 'checkbox';
    this.legendCardHeaderCheckbox.checked = visible ? true : false;
    this.legendCardHeaderCheckbox.addEventListener('change', function (event) {
        const layer = map.getLayer(layerDefinition.id);

        if (this.checked) {
            // visible attribute used for grouped layers like clusters, uses a setter for the entire layer group.
            if ('visible' in layerDefinition) {
                layerDefinition.visible = true;
            } else {
                layer.visible = 'visible';
            }
        } else {
            if ('visible' in layerDefinition) {
                layerDefinition.visible = false;
            } else {
                layer.visible = 'none';
            }
        }

        self.updateVisibility();
    });

    this.legendCardHeaderToggle = document.createElement('button');
    this.legendCardHeaderToggle.className = 'accordion-button';
    this.legendCardHeaderToggle.setAttribute('type', 'button');
    this.legendCardHeaderToggle.setAttribute('aria-expanded', 'true');
    this.legendCardHeaderToggle.setAttribute('aria-controls', `collapse-pane-${layerDefinition.id}`);
    this.legendCardHeaderToggle.setAttribute('data-bs-target', `#collapse-pane-${layerDefinition.id}`);
    this.legendCardHeaderToggle.setAttribute('data-bs-toggle', 'collapse');

    const legendCardHeaderToggleText = document.createElement('span');
    legendCardHeaderToggleText.innerHTML = layerDefinition.label;

    this.legendCardHeaderToggle.append(this.legendCardHeaderCheckbox, legendCardHeaderToggleText, this.loadingIndicator);
    legendCardHeader.append(this.legendCardHeaderToggle);

    let legendCollapse = document.createElement('div');
    legendCollapse.id = `collapse-pane-${layerDefinition.id}`;
    legendCollapse.className = 'accordion-collapse collapse show';
    legendCollapse.setAttribute('data-bs-parent', `#${parentID}`);
    legendCollapse.setAttribute('aria-labelledby', `card-header-${layerDefinition.id}`);
    legendCollapse.addEventListener('show.bs.collapse', (e) => {
        setTimeout(function () {
            legend.checkYPosition();
        }, 350);
    });

    let legendCollapseContent = document.createElement('div');
    legendCollapseContent.className = 'accordion-body';
    legendCollapse.append(legendCollapseContent);

    this.content.append(legendCardHeader, legendCollapse);

    if (legendScheme.length > 0) {
        legendCollapseContent.appendChild(populateCardEntries(legendScheme));
    } else if (layerDefinition.id === 'crash_segments') {
        legendCollapseContent.classList.add('segment-heatmap-legend');
    }

    this.updateVisibility();
}
</code></pre>
        </article>
    </section>




    
    
</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 4.0.4</a> on Tue Dec 17 2024 10:18:34 GMT-0500 (Eastern Standard Time) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/polyfill.js"></script>
<script src="scripts/linenumber.js"></script>

<script src="scripts/search.js" defer></script>


<script src="scripts/collapse.js" defer></script>


</body>
</html>
